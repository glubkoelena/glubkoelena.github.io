!function(e){function t(a){if(n[a])return n[a].exports;var r=n[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,a){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:a})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=7)}([function(e,t,n){"use strict";function a(e,t){history.replaceState({title:t,url:e},t,e),document.title=t}function r(){Number.prototype.format=function(e){e=void 0!==e?e:0;var t,n,a=String(this.toFixed(e)).split("."),r=a[0],o=a[1],i=[];if(r>9999){for(;n=r.slice(-3);)i.push(n),r=r.substr(0,r.length-3);t=i.reverse().join(" ")}else t=r;return o&&(t+="."+o),t}}function o(){return"article"in window}function i(){return document.querySelectorAll(".js-feature").length>0}function s(e){return e=e.replace("#",""),[parseInt(e.substring(0,2),16),parseInt(e.substring(2,4),16),parseInt(e.substring(4,6),16)]}function l(){var e=document.createElement("script");e.src="https://www.youtube.com/player_api",document.querySelector("head").appendChild(e)}function c(e){return e.replace(/[^\d\.]/g,"")}function u(){return window.pageYOffset||document.documentElement.scrollTop}function d(){return Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)}Object.defineProperty(t,"__esModule",{value:!0}),t.replaceHistoryState=a,t.initNumbersFormat=r,t.isArticle=o,t.isFeature=i,t.hexToRgb=s,t.loadYoutubeAPI=l,t.clearNumber=c,t.getDocumentScrollTop=u,t.getDocumentHeight=d},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";function a(e,t){if(!e||!t)return null;var n=e.querySelector('[data-stats="views"]');n&&t.views&&0!=t.views&&(n.innerText=t.views.format());var a=e.querySelector('[data-stats="fb"]');a&&t.fb&&0!=t.fb&&(a.innerText=t.fb.format(),a.classList.add("visible"));var r=e.querySelector('[data-stats="vk"]');r&&t.vk&&0!=t.vk&&(r.innerText=t.vk.format(),r.classList.add("visible")),e.classList.add("visible")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e=e||document;var t=Array.from(e.querySelectorAll(".js-stats"));if(!t.length)return null;var n={};t.forEach(function(e){var t=e.dataset.uid;t&&(n[t]?n[t].push(e):n[t]=[e])}),$.get(TJ.api+"stats/get/",{uids:Object.keys(n).join()},function(e){e.forEach(function(e){n[e.uid].forEach(function(t){a(t,e)})})})}},function(e,t,n){"use strict";function a(e){return window.TJ?TJ.user?null:void $.get(TJ.api+"stats/"+e+"/incviews/"):null}Object.defineProperty(t,"__esModule",{value:!0}),t.incviews=a},function(e,t,n){"use strict";function a(e){var t=e.url,n=e.id,a=e.width,r=e.height,o=Math.round(screen.width/2-a/2),i=screen.height>r?Math.round(screen.height/3-r/2):0,s="left="+o+",top="+i+",width="+a+",height="+r+",personalbar=0,toolbar=0,scrollbars=1,resizable=1",l=window.open(t,n,s);return l?(l.focus(),l):(location.href=t,null)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e=e||document;var t={vk:"https://vk.com/share.php",fb:"https://www.facebook.com/sharer/sharer.php",twt:"https://twitter.com/intent/tweet",tg:"https://telegram.me/share/url"};Array.from(e.querySelectorAll('.js-share-button[data-share="vk"]')).forEach(function(e){e.dataset.url&&e.addEventListener("click",function(n){n.preventDefault(),a({url:t.vk+"?url="+e.dataset.url,id:"vk_sharer",width:550,height:330})},!1)}),Array.from(e.querySelectorAll('.js-share-button[data-share="fb"]')).forEach(function(e){e.dataset.url&&e.addEventListener("click",function(n){n.preventDefault(),a({url:t.fb+"?u="+e.dataset.url,id:"facebook_sharer",width:600,height:500})},!1)}),Array.from(e.querySelectorAll('.js-share-button[data-share="twt"]')).forEach(function(e){if(e.dataset.url){var n=e.dataset.text||null;e.addEventListener("click",function(r){r.preventDefault(),a({url:t.twt+"?url="+e.dataset.url+(n?"&text="+n:""),id:"twitter_sharer",width:600,height:450})},!1)}}),Array.from(e.querySelectorAll('.js-share-button[data-share="telegram"]')).forEach(function(e){e.dataset.url&&e.addEventListener("click",function(n){n.preventDefault(),a({url:t.tg+"?url="+e.dataset.url,id:"telegram_sharer",width:600,height:500})},!1)})}},function(e,t,n){"use strict";function a(e){var t=e||document;Array.from(t.querySelectorAll(".unfolder")).forEach(function(e){e.addEventListener("click",function(t){e.parentNode.classList.toggle("unfolded")})})}Object.defineProperty(t,"__esModule",{value:!0}),t.initUnfolders=a},function(e,t,n){var a,r,o;!function(n){r=[],a=n,void 0!==(o="function"==typeof a?a.apply(t,r):a)&&(e.exports=o)}(function(){"use strict";function e(e,t){var n=document.createElement("div");return c(n,t),e.appendChild(n),n}function t(e){return e.filter(function(e){return!this[e]&&(this[e]=!0)},{})}function n(e,t){return Math.round(e/t)*t}function a(e,t){var n=e.getBoundingClientRect(),a=e.ownerDocument,r=a.documentElement,o=f();return/webkit.*Chrome.*Mobile/i.test(navigator.userAgent)&&(o.x=0),t?n.top+o.y-r.clientTop:n.left+o.x-r.clientLeft}function r(e){return"number"==typeof e&&!isNaN(e)&&isFinite(e)}function o(e,t,n){n>0&&(c(e,t),setTimeout(function(){u(e,t)},n))}function i(e){return Math.max(Math.min(e,100),0)}function s(e){return Array.isArray(e)?e:[e]}function l(e){e=String(e);var t=e.split(".");return t.length>1?t[1].length:0}function c(e,t){e.classList?e.classList.add(t):e.className+=" "+t}function u(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," ")}function d(e,t){return e.classList?e.classList.contains(t):new RegExp("\\b"+t+"\\b").test(e.className)}function f(){var e=void 0!==window.pageXOffset,t="CSS1Compat"===(document.compatMode||"");return{x:e?window.pageXOffset:t?document.documentElement.scrollLeft:document.body.scrollLeft,y:e?window.pageYOffset:t?document.documentElement.scrollTop:document.body.scrollTop}}function p(){return window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"}}function h(e,t){return 100/(t-e)}function v(e,t){return 100*t/(e[1]-e[0])}function m(e,t){return v(e,e[0]<0?t+Math.abs(e[0]):t-e[0])}function _(e,t){return t*(e[1]-e[0])/100+e[0]}function g(e,t){for(var n=1;e>=t[n];)n+=1;return n}function b(e,t,n){if(n>=e.slice(-1)[0])return 100;var a,r,o,i,s=g(n,e);return a=e[s-1],r=e[s],o=t[s-1],i=t[s],o+m([a,r],n)/h(o,i)}function y(e,t,n){if(n>=100)return e.slice(-1)[0];var a,r,o,i,s=g(n,t);return a=e[s-1],r=e[s],o=t[s-1],i=t[s],_([a,r],(n-o)*h(o,i))}function w(e,t,a,r){if(100===r)return r;var o,i,s=g(r,e);return a?(o=e[s-1],i=e[s],r-o>(i-o)/2?i:o):t[s-1]?e[s-1]+n(r-e[s-1],t[s-1]):r}function k(e,t,n){var a;if("number"==typeof t&&(t=[t]),"[object Array]"!==Object.prototype.toString.call(t))throw new Error("noUiSlider ("+W+"): 'range' contains invalid value.");if(a="min"===e?0:"max"===e?100:parseFloat(e),!r(a)||!r(t[0]))throw new Error("noUiSlider ("+W+"): 'range' value isn't numeric.");n.xPct.push(a),n.xVal.push(t[0]),a?n.xSteps.push(!isNaN(t[1])&&t[1]):isNaN(t[1])||(n.xSteps[0]=t[1]),n.xHighestCompleteStep.push(0)}function j(e,t,n){if(!t)return!0;n.xSteps[e]=v([n.xVal[e],n.xVal[e+1]],t)/h(n.xPct[e],n.xPct[e+1]);var a=(n.xVal[e+1]-n.xVal[e])/n.xNumSteps[e],r=Math.ceil(Number(a.toFixed(3))-1),o=n.xVal[e]+n.xNumSteps[e]*r;n.xHighestCompleteStep[e]=o}function x(e,t,n,a){this.xPct=[],this.xVal=[],this.xSteps=[a||!1],this.xNumSteps=[!1],this.xHighestCompleteStep=[],this.snap=t,this.direction=n;var r,o=[];for(r in e)e.hasOwnProperty(r)&&o.push([e[r],r]);for(o.length&&"object"==typeof o[0][0]?o.sort(function(e,t){return e[0][0]-t[0][0]}):o.sort(function(e,t){return e[0]-t[0]}),r=0;r<o.length;r++)k(o[r][1],o[r][0],this);for(this.xNumSteps=this.xSteps.slice(0),r=0;r<this.xNumSteps.length;r++)j(r,this.xNumSteps[r],this)}function C(e,t){if(!r(t))throw new Error("noUiSlider ("+W+"): 'step' is not numeric.");e.singleStep=t}function S(e,t){if("object"!=typeof t||Array.isArray(t))throw new Error("noUiSlider ("+W+"): 'range' is not an object.");if(void 0===t.min||void 0===t.max)throw new Error("noUiSlider ("+W+"): Missing 'min' or 'max' in 'range'.");if(t.min===t.max)throw new Error("noUiSlider ("+W+"): 'range' 'min' and 'max' cannot be equal.");e.spectrum=new x(t,e.snap,e.dir,e.singleStep)}function E(e,t){if(t=s(t),!Array.isArray(t)||!t.length)throw new Error("noUiSlider ("+W+"): 'start' option is incorrect.");e.handles=t.length,e.start=t}function T(e,t){if(e.snap=t,"boolean"!=typeof t)throw new Error("noUiSlider ("+W+"): 'snap' option must be a boolean.")}function A(e,t){if(e.animate=t,"boolean"!=typeof t)throw new Error("noUiSlider ("+W+"): 'animate' option must be a boolean.")}function L(e,t){if(e.animationDuration=t,"number"!=typeof t)throw new Error("noUiSlider ("+W+"): 'animationDuration' option must be a number.")}function $(e,t){var n,a=[!1];if("lower"===t?t=[!0,!1]:"upper"===t&&(t=[!1,!0]),!0===t||!1===t){for(n=1;n<e.handles;n++)a.push(t);a.push(!1)}else{if(!Array.isArray(t)||!t.length||t.length!==e.handles+1)throw new Error("noUiSlider ("+W+"): 'connect' option doesn't match handle count.");a=t}e.connect=a}function O(e,t){switch(t){case"horizontal":e.ort=0;break;case"vertical":e.ort=1;break;default:throw new Error("noUiSlider ("+W+"): 'orientation' option is invalid.")}}function P(e,t){if(!r(t))throw new Error("noUiSlider ("+W+"): 'margin' option must be numeric.");if(0!==t&&(e.margin=e.spectrum.getMargin(t),!e.margin))throw new Error("noUiSlider ("+W+"): 'margin' option is only supported on linear sliders.")}function R(e,t){if(!r(t))throw new Error("noUiSlider ("+W+"): 'limit' option must be numeric.");if(e.limit=e.spectrum.getMargin(t),!e.limit||e.handles<2)throw new Error("noUiSlider ("+W+"): 'limit' option is only supported on linear sliders with 2 or more handles.")}function N(e,t){if(!r(t))throw new Error("noUiSlider ("+W+"): 'padding' option must be numeric.");if(0!==t){if(e.padding=e.spectrum.getMargin(t),!e.padding)throw new Error("noUiSlider ("+W+"): 'padding' option is only supported on linear sliders.");if(e.padding<0)throw new Error("noUiSlider ("+W+"): 'padding' option must be a positive number.");if(e.padding>=50)throw new Error("noUiSlider ("+W+"): 'padding' option must be less than half the range.")}}function M(e,t){switch(t){case"ltr":e.dir=0;break;case"rtl":e.dir=1;break;default:throw new Error("noUiSlider ("+W+"): 'direction' option was not recognized.")}}function q(e,t){if("string"!=typeof t)throw new Error("noUiSlider ("+W+"): 'behaviour' must be a string containing options.");var n=t.indexOf("tap")>=0,a=t.indexOf("drag")>=0,r=t.indexOf("fixed")>=0,o=t.indexOf("snap")>=0,i=t.indexOf("hover")>=0;if(r){if(2!==e.handles)throw new Error("noUiSlider ("+W+"): 'fixed' behaviour must be used with 2 handles");P(e,e.start[1]-e.start[0])}e.events={tap:n||o,drag:a,fixed:r,snap:o,hover:i}}function I(e,t){if(!1!==t)if(!0===t){e.tooltips=[];for(var n=0;n<e.handles;n++)e.tooltips.push(!0)}else{if(e.tooltips=s(t),e.tooltips.length!==e.handles)throw new Error("noUiSlider ("+W+"): must pass a formatter for all handles.");e.tooltips.forEach(function(e){if("boolean"!=typeof e&&("object"!=typeof e||"function"!=typeof e.to))throw new Error("noUiSlider ("+W+"): 'tooltips' must be passed a formatter or 'false'.")})}}function B(e,t){if(e.format=t,"function"==typeof t.to&&"function"==typeof t.from)return!0;throw new Error("noUiSlider ("+W+"): 'format' requires 'to' and 'from' methods.")}function H(e,t){if(void 0!==t&&"string"!=typeof t&&!1!==t)throw new Error("noUiSlider ("+W+"): 'cssPrefix' must be a string or `false`.");e.cssPrefix=t}function D(e,t){if(void 0!==t&&"object"!=typeof t)throw new Error("noUiSlider ("+W+"): 'cssClasses' must be an object.");if("string"==typeof e.cssPrefix){e.cssClasses={};for(var n in t)t.hasOwnProperty(n)&&(e.cssClasses[n]=e.cssPrefix+t[n])}else e.cssClasses=t}function F(e,t){if(!0!==t&&!1!==t)throw new Error("noUiSlider ("+W+"): 'useRequestAnimationFrame' option should be true (default) or false.");e.useRequestAnimationFrame=t}function U(e){var t={margin:0,limit:0,padding:0,animate:!0,animationDuration:300,format:Y},n={step:{r:!1,t:C},start:{r:!0,t:E},connect:{r:!0,t:$},direction:{r:!0,t:M},snap:{r:!1,t:T},animate:{r:!1,t:A},animationDuration:{r:!1,t:L},range:{r:!0,t:S},orientation:{r:!1,t:O},margin:{r:!1,t:P},limit:{r:!1,t:R},padding:{r:!1,t:N},behaviour:{r:!0,t:q},format:{r:!1,t:B},tooltips:{r:!1,t:I},cssPrefix:{r:!1,t:H},cssClasses:{r:!1,t:D},useRequestAnimationFrame:{r:!1,t:F}},a={connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal",cssPrefix:"noUi-",cssClasses:{target:"target",base:"base",origin:"origin",handle:"handle",handleLower:"handle-lower",handleUpper:"handle-upper",horizontal:"horizontal",vertical:"vertical",background:"background",connect:"connect",ltr:"ltr",rtl:"rtl",draggable:"draggable",drag:"state-drag",tap:"state-tap",active:"active",tooltip:"tooltip",pips:"pips",pipsHorizontal:"pips-horizontal",pipsVertical:"pips-vertical",marker:"marker",markerHorizontal:"marker-horizontal",markerVertical:"marker-vertical",markerNormal:"marker-normal",markerLarge:"marker-large",markerSub:"marker-sub",value:"value",valueHorizontal:"value-horizontal",valueVertical:"value-vertical",valueNormal:"value-normal",valueLarge:"value-large",valueSub:"value-sub"},useRequestAnimationFrame:!0};Object.keys(n).forEach(function(r){if(void 0===e[r]&&void 0===a[r]){if(n[r].r)throw new Error("noUiSlider ("+W+"): '"+r+"' is required.");return!0}n[r].t(t,void 0===e[r]?a[r]:e[r])}),t.pips=e.pips;var r=[["left","top"],["right","bottom"]];return t.style=r[t.dir][t.ort],t.styleOposite=r[t.dir?0:1][t.ort],t}function z(n,r,l){function h(t,n){var a=e(t,r.cssClasses.origin),o=e(a,r.cssClasses.handle);return o.setAttribute("data-handle",n),0===n?c(o,r.cssClasses.handleLower):n===r.handles-1&&c(o,r.cssClasses.handleUpper),a}function v(t,n){return!!n&&e(t,r.cssClasses.connect)}function m(t,n){return!!r.tooltips[n]&&e(t.firstChild,r.cssClasses.tooltip)}function _(e,t,n){if("range"===e||"steps"===e)return ie.xVal;if("count"===e){if(!t)throw new Error("noUiSlider ("+W+"): 'values' required for mode 'count'.");var a,r=100/(t-1),o=0;for(t=[];(a=o++*r)<=100;)t.push(a);e="positions"}return"positions"===e?t.map(function(e){return ie.fromStepping(n?ie.getStep(e):e)}):"values"===e?n?t.map(function(e){return ie.fromStepping(ie.getStep(ie.toStepping(e)))}):t:void 0}function g(e,n,a){function r(e,t){return(e+t).toFixed(7)/1}var o={},i=ie.xVal[0],s=ie.xVal[ie.xVal.length-1],l=!1,c=!1,u=0;return a=t(a.slice().sort(function(e,t){return e-t})),a[0]!==i&&(a.unshift(i),l=!0),a[a.length-1]!==s&&(a.push(s),c=!0),a.forEach(function(t,i){var s,d,f,p,h,v,m,_,g,b,y=t,w=a[i+1];if("steps"===n&&(s=ie.xNumSteps[i]),s||(s=w-y),!1!==y&&void 0!==w)for(s=Math.max(s,1e-7),d=y;d<=w;d=r(d,s)){for(p=ie.toStepping(d),h=p-u,_=h/e,g=Math.round(_),b=h/g,f=1;f<=g;f+=1)v=u+f*b,o[v.toFixed(5)]=["x",0];m=a.indexOf(d)>-1?1:"steps"===n?2:0,!i&&l&&(m=0),d===w&&c||(o[p.toFixed(5)]=[d,m]),u=p}}),o}function b(e,t,n){function a(e,t){var n=t===r.cssClasses.value,a=n?f:p,o=n?u:d;return t+" "+a[r.ort]+" "+o[e]}function o(e,t,n){return'class="'+a(n[1],t)+'" style="'+r.style+": "+e+'%"'}function i(e,a){a[1]=a[1]&&t?t(a[0],a[1]):a[1],l+="<div "+o(e,r.cssClasses.marker,a)+"></div>",a[1]&&(l+="<div "+o(e,r.cssClasses.value,a)+">"+n.to(a[0])+"</div>")}var s=document.createElement("div"),l="",u=[r.cssClasses.valueNormal,r.cssClasses.valueLarge,r.cssClasses.valueSub],d=[r.cssClasses.markerNormal,r.cssClasses.markerLarge,r.cssClasses.markerSub],f=[r.cssClasses.valueHorizontal,r.cssClasses.valueVertical],p=[r.cssClasses.markerHorizontal,r.cssClasses.markerVertical];return c(s,r.cssClasses.pips),c(s,0===r.ort?r.cssClasses.pipsHorizontal:r.cssClasses.pipsVertical),Object.keys(e).forEach(function(t){i(t,e[t])}),s.innerHTML=l,s}function y(e){var t=e.mode,n=e.density||1,a=e.filter||!1,r=e.values||!1,o=e.stepped||!1,i=_(t,r,o),s=g(n,t,i),l=e.format||{to:Math.round};return ne.appendChild(b(s,a,l))}function w(){var e=Q.getBoundingClientRect(),t="offset"+["Width","Height"][r.ort];return 0===r.ort?e.width||Q[t]:e.height||Q[t]}function k(e,t,n,a){var o=function(t){return!ne.hasAttribute("disabled")&&(!d(ne,r.cssClasses.tap)&&(!!(t=j(t,a.pageOffset))&&(!(e===te.start&&void 0!==t.buttons&&t.buttons>1)&&((!a.hover||!t.buttons)&&(t.calcPoint=t.points[r.ort],void n(t,a))))))},i=[];return e.split(" ").forEach(function(e){t.addEventListener(e,o,!1),i.push([e,o])}),i}function j(e,t){e.preventDefault();var n,a,r=0===e.type.indexOf("touch"),o=0===e.type.indexOf("mouse"),i=0===e.type.indexOf("pointer");if(0===e.type.indexOf("MSPointer")&&(i=!0),r){if(e.touches.length>1)return!1;n=e.changedTouches[0].pageX,a=e.changedTouches[0].pageY}return t=t||f(),(o||i)&&(n=e.clientX+t.x,a=e.clientY+t.y),e.pageOffset=t,e.points=[n,a],e.cursor=o||i,e}function x(e){var t=e-a(Q,r.ort),n=100*t/w();return r.dir?100-n:n}function C(e){var t=100,n=!1;return K.forEach(function(a,r){if(!a.hasAttribute("disabled")){var o=Math.abs(ae[r]-e);o<t&&(n=r,t=o)}}),n}function S(e,t,n,a){var r=n.slice(),o=[!e,e],i=[e,!e];a=a.slice(),e&&a.reverse(),a.length>1?a.forEach(function(e,n){var a=R(r,e,r[e]+t,o[n],i[n]);!1===a?t=0:(t=a-r[e],r[e]=a)}):o=i=[!0];var s=!1;a.forEach(function(e,a){s=I(e,n[e]+t,o[a],i[a])||s}),s&&a.forEach(function(e){E("update",e),E("slide",e)})}function E(e,t,n){Object.keys(le).forEach(function(a){var o=a.split(".")[0];e===o&&le[a].forEach(function(e){e.call(ee,se.map(r.format.to),t,se.slice(),n||!1,ae.slice())})})}function T(e,t){"mouseout"===e.type&&"HTML"===e.target.nodeName&&null===e.relatedTarget&&L(e,t)}function A(e,t){if(-1===navigator.appVersion.indexOf("MSIE 9")&&0===e.buttons&&0!==t.buttonsProperty)return L(e,t);var n=(r.dir?-1:1)*(e.calcPoint-t.startCalcPoint);S(n>0,100*n/t.baseSize,t.locations,t.handleNumbers)}function L(e,t){oe&&(u(oe,r.cssClasses.active),oe=!1),e.cursor&&(document.body.style.cursor="",document.body.removeEventListener("selectstart",document.body.noUiListener)),document.documentElement.noUiListeners.forEach(function(e){document.documentElement.removeEventListener(e[0],e[1])}),u(ne,r.cssClasses.drag),q(),t.handleNumbers.forEach(function(e){E("set",e),E("change",e),E("end",e)})}function $(e,t){if(1===t.handleNumbers.length){var n=K[t.handleNumbers[0]];if(n.hasAttribute("disabled"))return!1;oe=n.children[0],c(oe,r.cssClasses.active)}e.preventDefault(),e.stopPropagation();var a=k(te.move,document.documentElement,A,{startCalcPoint:e.calcPoint,baseSize:w(),pageOffset:e.pageOffset,handleNumbers:t.handleNumbers,buttonsProperty:e.buttons,locations:ae.slice()}),o=k(te.end,document.documentElement,L,{handleNumbers:t.handleNumbers}),i=k("mouseout",document.documentElement,T,{handleNumbers:t.handleNumbers});if(document.documentElement.noUiListeners=a.concat(o,i),e.cursor){document.body.style.cursor=getComputedStyle(e.target).cursor,K.length>1&&c(ne,r.cssClasses.drag);var s=function(){return!1};document.body.noUiListener=s,document.body.addEventListener("selectstart",s,!1)}t.handleNumbers.forEach(function(e){E("start",e)})}function O(e){e.stopPropagation();var t=x(e.calcPoint),n=C(t);if(!1===n)return!1;r.events.snap||o(ne,r.cssClasses.tap,r.animationDuration),I(n,t,!0,!0),q(),E("slide",n,!0),E("set",n,!0),E("change",n,!0),E("update",n,!0),r.events.snap&&$(e,{handleNumbers:[n]})}function P(e){var t=x(e.calcPoint),n=ie.getStep(t),a=ie.fromStepping(n);Object.keys(le).forEach(function(e){"hover"===e.split(".")[0]&&le[e].forEach(function(e){e.call(ee,a)})})}function R(e,t,n,a,o){return K.length>1&&(a&&t>0&&(n=Math.max(n,e[t-1]+r.margin)),o&&t<K.length-1&&(n=Math.min(n,e[t+1]-r.margin))),K.length>1&&r.limit&&(a&&t>0&&(n=Math.min(n,e[t-1]+r.limit)),o&&t<K.length-1&&(n=Math.max(n,e[t+1]-r.limit))),r.padding&&(0===t&&(n=Math.max(n,r.padding)),t===K.length-1&&(n=Math.min(n,100-r.padding))),n=ie.getStep(n),(n=i(n))!==e[t]&&n}function N(e){return e+"%"}function M(e,t){ae[e]=t,se[e]=ie.fromStepping(t);var n=function(){K[e].style[r.style]=N(t),B(e),B(e+1)};window.requestAnimationFrame&&r.useRequestAnimationFrame?window.requestAnimationFrame(n):n()}function q(){re.forEach(function(e){var t=ae[e]>50?-1:1,n=3+(K.length+t*e);K[e].childNodes[0].style.zIndex=n})}function I(e,t,n,a){return!1!==(t=R(ae,e,t,n,a))&&(M(e,t),!0)}function B(e){if(Z[e]){var t=0,n=100;0!==e&&(t=ae[e-1]),e!==Z.length-1&&(n=ae[e]),Z[e].style[r.style]=N(t),Z[e].style[r.styleOposite]=N(100-n)}}function H(e,t){null!==e&&!1!==e&&("number"==typeof e&&(e=String(e)),!1===(e=r.format.from(e))||isNaN(e)||I(t,ie.toStepping(e),!1,!1))}function D(e,t){var n=s(e),a=void 0===ae[0];t=void 0===t||!!t,n.forEach(H),r.animate&&!a&&o(ne,r.cssClasses.tap,r.animationDuration),re.forEach(function(e){I(e,ae[e],!0,!1)}),q(),re.forEach(function(e){E("update",e),null!==n[e]&&t&&E("set",e)})}function F(e){D(r.start,e)}function z(){var e=se.map(r.format.to);return 1===e.length?e[0]:e}function V(){for(var e in r.cssClasses)r.cssClasses.hasOwnProperty(e)&&u(ne,r.cssClasses[e]);for(;ne.firstChild;)ne.removeChild(ne.firstChild);delete ne.noUiSlider}function Y(){return ae.map(function(e,t){var n=ie.getNearbySteps(e),a=se[t],r=n.thisStep.step,o=null;!1!==r&&a+r>n.stepAfter.startValue&&(r=n.stepAfter.startValue-a),o=a>n.thisStep.startValue?n.thisStep.step:!1!==n.stepBefore.step&&a-n.stepBefore.highestStep,100===e?r=null:0===e&&(o=null);var i=ie.countStepDecimals();return null!==r&&!1!==r&&(r=Number(r.toFixed(i))),null!==o&&!1!==o&&(o=Number(o.toFixed(i))),[o,r]})}function J(e,t){le[e]=le[e]||[],le[e].push(t),"update"===e.split(".")[0]&&K.forEach(function(e,t){E("update",t)})}function X(e){var t=e&&e.split(".")[0],n=t&&e.substring(t.length);Object.keys(le).forEach(function(e){var a=e.split(".")[0],r=e.substring(a.length);t&&t!==a||n&&n!==r||delete le[e]})}function G(e,t){var n=z(),a=["margin","limit","padding","range","animate","snap","step","format"];a.forEach(function(t){void 0!==e[t]&&(l[t]=e[t])});var o=U(l);a.forEach(function(t){void 0!==e[t]&&(r[t]=o[t])}),o.spectrum.direction=ie.direction,ie=o.spectrum,r.margin=o.margin,r.limit=o.limit,r.padding=o.padding,ae=[],D(e.start||n,t)}var Q,K,Z,ee,te=p(),ne=n,ae=[],re=[],oe=!1,ie=r.spectrum,se=[],le={};if(ne.noUiSlider)throw new Error("noUiSlider ("+W+"): Slider was already initialized.");return function(t){c(t,r.cssClasses.target),0===r.dir?c(t,r.cssClasses.ltr):c(t,r.cssClasses.rtl),0===r.ort?c(t,r.cssClasses.horizontal):c(t,r.cssClasses.vertical),Q=e(t,r.cssClasses.base)}(ne),function(e,t){K=[],Z=[],Z.push(v(t,e[0]));for(var n=0;n<r.handles;n++)K.push(h(t,n)),re[n]=n,Z.push(v(t,e[n+1]))}(r.connect,Q),ee={destroy:V,steps:Y,on:J,off:X,get:z,set:D,reset:F,__moveHandles:function(e,t,n){S(e,t,ae,n)},options:l,updateOptions:G,target:ne,pips:y},function(e){e.fixed||K.forEach(function(e,t){k(te.start,e.children[0],$,{handleNumbers:[t]})}),e.tap&&k(te.start,Q,O,{}),e.hover&&k(te.move,Q,P,{hover:!0}),e.drag&&Z.forEach(function(t,n){if(!1!==t&&0!==n&&n!==Z.length-1){var a=K[n-1],o=K[n],i=[t];c(t,r.cssClasses.draggable),e.fixed&&(i.push(a.children[0]),i.push(o.children[0])),i.forEach(function(e){k(te.start,e,$,{handles:[a,o],handleNumbers:[n-1,n]})})}})}(r.events),D(r.start),r.pips&&y(r.pips),r.tooltips&&function(){var e=K.map(m);J("update",function(t,n,a){if(e[n]){var o=t[n];!0!==r.tooltips[n]&&(o=r.tooltips[n].to(a[n])),e[n].innerHTML=o}})}(),ee}function V(e,t){if(!e.nodeName)throw new Error("noUiSlider ("+W+"): create requires a single element.");var n=U(t,e),a=z(e,n,t);return e.noUiSlider=a,a}var W="9.2.0";x.prototype.getMargin=function(e){var t=this.xNumSteps[0];if(t&&e/t%1!=0)throw new Error("noUiSlider ("+W+"): 'limit', 'margin' and 'padding' must be divisible by step.");return 2===this.xPct.length&&v(this.xVal,e)},x.prototype.toStepping=function(e){return e=b(this.xVal,this.xPct,e)},x.prototype.fromStepping=function(e){return y(this.xVal,this.xPct,e)},x.prototype.getStep=function(e){return e=w(this.xPct,this.xSteps,this.snap,e)},x.prototype.getNearbySteps=function(e){var t=g(e,this.xPct);return{stepBefore:{startValue:this.xVal[t-2],step:this.xNumSteps[t-2],highestStep:this.xHighestCompleteStep[t-2]},thisStep:{startValue:this.xVal[t-1],step:this.xNumSteps[t-1],highestStep:this.xHighestCompleteStep[t-1]},stepAfter:{startValue:this.xVal[t-0],step:this.xNumSteps[t-0],highestStep:this.xHighestCompleteStep[t-0]}}},x.prototype.countStepDecimals=function(){var e=this.xNumSteps.map(l);return Math.max.apply(null,e)},x.prototype.convert=function(e){return this.getStep(this.toStepping(e))};var Y={to:function(e){return void 0!==e&&e.toFixed(2)},from:Number};return{version:W,create:V}})},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}var r=n(8),o=a(r),i=n(0),s=n(16),l=a(s),c=n(18),u=a(c),d=n(20),f=a(d),p=n(2),h=a(p),v=n(4),m=a(v),_=n(21),g=a(_),b=n(22),y=a(b),w=n(23),k=a(w),j=n(24),x=a(j),C=n(25),S=a(C),E=n(27),T=a(E),A=n(28),L=a(A),O=n(29),P=a(O),R=n(36),N=a(R),M=n(44),q=a(M),I=n(45),B=a(I),H=n(46),D=a(H),F=n(47),U=a(F),z=n(48),V=a(z),W=n(50),Y=a(W),J=n(51),X=a(J),G=n(55),Q=a(G),K=n(56),Z=a(K),ee=n(57),te=a(ee),ne=n(58),ae=a(ne),re=n(59),oe=a(re);"serviceWorker"in navigator&&"ENABLE_NOTIFICATIONS"in window&&navigator.serviceWorker.register("/service-worker.js").then(function(e){}).catch(function(e){console.error(e)}),document.addEventListener("DOMContentLoaded",function(){TJ.csrf&&$.ajaxSetup({beforeSend:function(e,t){/^(GET|HEAD|OPTIONS|TRACE)$/.test(t.type)||this.crossDomain||e.setRequestHeader("X-CSRFToken",TJ.csrf)}}),(0,o.default)(),(0,i.initNumbersFormat)(),(0,l.default)(),window.lazyImages=(0,u.default)(),window.lazyImages.update().check().handlers(!0),"serviceWorker"in navigator&&"ENABLE_NOTIFICATIONS"in window&&(0,f.default)(),(0,h.default)(),(0,m.default)(),(0,g.default)(),(0,y.default)(),(0,k.default)(),(0,x.default)(),(0,S.default)(),(0,T.default)(),(0,L.default)(),(0,q.default)(),(0,te.default)(),(0,ae.default)(),(0,oe.default)(),(0,B.default)(),(0,D.default)(),(0,U.default)(),(0,V.default)(),(0,Y.default)(),(0,X.default)(),(0,P.default)(),(0,N.default)(),(0,Q.default)(),(0,Z.default)(),jQuery.fn.birmanizeAnchors&&$(document).birmanizeAnchors()})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(9).polyfill(),t.default=function(){Array.from||(Array.from=n(10)),window.Promise||(window.Promise=n(12))}},function(e,t,n){!function(t,n,a){"use strict";function r(){function e(e,t){this.scrollLeft=e,this.scrollTop=t}function r(e){return.5*(1-Math.cos(Math.PI*e))}function o(e){if("object"!=typeof e||null===e||e.behavior===a||"auto"===e.behavior||"instant"===e.behavior)return!0;if("object"==typeof e&&"smooth"===e.behavior)return!1;throw new TypeError("behavior not valid")}function i(e){var a,r,o;do{e=e.parentNode,a=e===n.body,r=e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth,o="visible"===t.getComputedStyle(e,null).overflow}while(!a&&(!r||o));return a=r=o=null,e}function s(e){var n,a,o,i=f(),l=(i-e.startTime)/u;l=l>1?1:l,n=r(l),a=e.startX+(e.x-e.startX)*n,o=e.startY+(e.y-e.startY)*n,e.method.call(e.scrollable,a,o),a===e.x&&o===e.y||t.requestAnimationFrame(s.bind(t,e))}function l(a,r,o){var i,l,c,u,p=f();a===n.body?(i=t,l=t.scrollX||t.pageXOffset,c=t.scrollY||t.pageYOffset,u=d.scroll):(i=a,l=a.scrollLeft,c=a.scrollTop,u=e),s({scrollable:i,method:u,startTime:p,startX:l,startY:c,x:r,y:o})}if(!("scrollBehavior"in n.documentElement.style)){var c=t.HTMLElement||t.Element,u=468,d={scroll:t.scroll||t.scrollTo,scrollBy:t.scrollBy,elScroll:c.prototype.scroll||e,scrollIntoView:c.prototype.scrollIntoView},f=t.performance&&t.performance.now?t.performance.now.bind(t.performance):Date.now;t.scroll=t.scrollTo=function(){if(o(arguments[0]))return void d.scroll.call(t,arguments[0].left||arguments[0],arguments[0].top||arguments[1]);l.call(t,n.body,~~arguments[0].left,~~arguments[0].top)},t.scrollBy=function(){if(o(arguments[0]))return void d.scrollBy.call(t,arguments[0].left||arguments[0],arguments[0].top||arguments[1]);l.call(t,n.body,~~arguments[0].left+(t.scrollX||t.pageXOffset),~~arguments[0].top+(t.scrollY||t.pageYOffset))},c.prototype.scroll=c.prototype.scrollTo=function(){if(o(arguments[0]))return void d.elScroll.call(this,arguments[0].left||arguments[0],arguments[0].top||arguments[1]);var e=arguments[0].left,t=arguments[0].top;l.call(this,this,"number"==typeof e?e:this.scrollLeft,"number"==typeof t?t:this.scrollTop)},c.prototype.scrollBy=function(){var e=arguments[0];"object"==typeof e?this.scroll({left:e.left+this.scrollLeft,top:e.top+this.scrollTop,behavior:e.behavior}):this.scroll(this.scrollLeft+e,this.scrollTop+arguments[1])},c.prototype.scrollIntoView=function(){if(o(arguments[0]))return void d.scrollIntoView.call(this,arguments[0]===a||arguments[0]);var e=i(this),r=e.getBoundingClientRect(),s=this.getBoundingClientRect();e!==n.body?(l.call(this,e,e.scrollLeft+s.left-r.left,e.scrollTop+s.top-r.top),t.scrollBy({left:r.left,top:r.top,behavior:"smooth"})):t.scrollBy({left:s.left,top:s.top,behavior:"smooth"})}}}e.exports={polyfill:r}}(window,document)},function(e,t,n){e.exports="function"==typeof Array.from?Array.from:n(11)},function(e,t){e.exports=function(){var e=function(e){return"function"==typeof e},t=function(e){var t=Number(e);return isNaN(t)?0:0!==t&&isFinite(t)?(t>0?1:-1)*Math.floor(Math.abs(t)):t},n=Math.pow(2,53)-1,a=function(e){var a=t(e);return Math.min(Math.max(a,0),n)},r=function(e){if(null!=e){if(["string","number","boolean","symbol"].indexOf(typeof e)>-1)return Symbol.iterator;if("undefined"!=typeof Symbol&&"iterator"in Symbol&&Symbol.iterator in e)return Symbol.iterator;if("@@iterator"in e)return"@@iterator"}},o=function(t,n){if(null!=t&&null!=n){var a=t[n];if(null==a)return;if(!e(a))throw new TypeError(a+" is not a function");return a}},i=function(e){var t=e.next();return!Boolean(t.done)&&t};return function(t){"use strict";var n,s=this,l=arguments.length>1?arguments[1]:void 0;if(void 0!==l){if(!e(l))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(n=arguments[2])}var c,u,d=o(t,r(t));if(void 0!==d){c=e(s)?Object(new s):[];var f=d.call(t);if(null==f)throw new TypeError("Array.from requires an array-like or iterable object");u=0;for(var p,h;;){if(!(p=i(f)))return c.length=u,c;h=p.value,c[u]=l?l.call(n,h,u):h,u++}}else{var v=Object(t);if(null==t)throw new TypeError("Array.from requires an array-like object - not null or undefined");var m=a(v.length);c=e(s)?Object(new s(m)):new Array(m),u=0;for(var _;u<m;)_=v[u],c[u]=l?l.call(n,_,u):_,u++;c.length=m}return c}}()},function(e,t,n){(function(t){!function(n){function a(){}function r(e,t){return function(){e.apply(t,arguments)}}function o(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],d(e,this)}function i(e,t){for(;3===e._state;)e=e._value;if(0===e._state)return void e._deferreds.push(t);e._handled=!0,o._immediateFn(function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null===n)return void(1===e._state?s:l)(t.promise,e._value);var a;try{a=n(e._value)}catch(e){return void l(t.promise,e)}s(t.promise,a)})}function s(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof o)return e._state=3,e._value=t,void c(e);if("function"==typeof n)return void d(r(n,t),e)}e._state=1,e._value=t,c(e)}catch(t){l(e,t)}}function l(e,t){e._state=2,e._value=t,c(e)}function c(e){2===e._state&&0===e._deferreds.length&&o._immediateFn(function(){e._handled||o._unhandledRejectionFn(e._value)});for(var t=0,n=e._deferreds.length;t<n;t++)i(e,e._deferreds[t]);e._deferreds=null}function u(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function d(e,t){var n=!1;try{e(function(e){n||(n=!0,s(t,e))},function(e){n||(n=!0,l(t,e))})}catch(e){if(n)return;n=!0,l(t,e)}}var f=setTimeout;o.prototype.catch=function(e){return this.then(null,e)},o.prototype.then=function(e,t){var n=new this.constructor(a);return i(this,new u(e,t,n)),n},o.all=function(e){var t=Array.prototype.slice.call(e);return new o(function(e,n){function a(o,i){try{if(i&&("object"==typeof i||"function"==typeof i)){var s=i.then;if("function"==typeof s)return void s.call(i,function(e){a(o,e)},n)}t[o]=i,0==--r&&e(t)}catch(e){n(e)}}if(0===t.length)return e([]);for(var r=t.length,o=0;o<t.length;o++)a(o,t[o])})},o.resolve=function(e){return e&&"object"==typeof e&&e.constructor===o?e:new o(function(t){t(e)})},o.reject=function(e){return new o(function(t,n){n(e)})},o.race=function(e){return new o(function(t,n){for(var a=0,r=e.length;a<r;a++)e[a].then(t,n)})},o._immediateFn="function"==typeof t&&function(e){t(e)}||function(e){f(e,0)},o._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},o._setImmediateFn=function(e){o._immediateFn=e},o._setUnhandledRejectionFn=function(e){o._unhandledRejectionFn=e},void 0!==e&&e.exports?e.exports=o:n.Promise||(n.Promise=o)}(this)}).call(t,n(13).setImmediate)},function(e,t,n){function a(e,t){this._id=e,this._clearFn=t}var r=Function.prototype.apply;t.setTimeout=function(){return new a(r.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new a(r.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},a.prototype.unref=a.prototype.ref=function(){},a.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(14),t.setImmediate=setImmediate,t.clearImmediate=clearImmediate},function(e,t,n){(function(e,t){!function(e,n){"use strict";function a(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var a={callback:e,args:t};return c[l]=a,s(l),l++}function r(e){delete c[e]}function o(e){var t=e.callback,a=e.args;switch(a.length){case 0:t();break;case 1:t(a[0]);break;case 2:t(a[0],a[1]);break;case 3:t(a[0],a[1],a[2]);break;default:t.apply(n,a)}}function i(e){if(u)setTimeout(i,0,e);else{var t=c[e];if(t){u=!0;try{o(t)}finally{r(e),u=!1}}}}if(!e.setImmediate){var s,l=1,c={},u=!1,d=e.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(e);f=f&&f.setTimeout?f:e,"[object process]"==={}.toString.call(e.process)?function(){s=function(e){t.nextTick(function(){i(e)})}}():function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?function(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&i(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),s=function(n){e.postMessage(t+n,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){i(e.data)},s=function(t){e.port2.postMessage(t)}}():d&&"onreadystatechange"in d.createElement("script")?function(){var e=d.documentElement;s=function(t){var n=d.createElement("script");n.onreadystatechange=function(){i(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():function(){s=function(e){setTimeout(i,0,e)}}(),f.setImmediate=a,f.clearImmediate=r}}("undefined"==typeof self?void 0===e?this:e:self)}).call(t,n(1),n(15))},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function r(e){if(u===setTimeout)return setTimeout(e,0);if((u===n||!u)&&setTimeout)return u=setTimeout,setTimeout(e,0);try{return u(e,0)}catch(t){try{return u.call(null,e,0)}catch(t){return u.call(this,e,0)}}}function o(e){if(d===clearTimeout)return clearTimeout(e);if((d===a||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(e);try{return d(e)}catch(t){try{return d.call(null,e)}catch(t){return d.call(this,e)}}}function i(){v&&p&&(v=!1,p.length?h=p.concat(h):m=-1,h.length&&s())}function s(){if(!v){var e=r(i);v=!0;for(var t=h.length;t;){for(p=h,h=[];++m<t;)p&&p[m].run();m=-1,t=h.length}p=null,v=!1,o(e)}}function l(e,t){this.fun=e,this.array=t}function c(){}var u,d,f=e.exports={};!function(){try{u="function"==typeof setTimeout?setTimeout:n}catch(e){u=n}try{d="function"==typeof clearTimeout?clearTimeout:a}catch(e){d=a}}();var p,h=[],v=!1,m=-1;f.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];h.push(new l(e,t)),1!==h.length||v||r(s)},l.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=c,f.addListener=c,f.once=c,f.off=c,f.removeListener=c,f.removeAllListeners=c,f.emit=c,f.prependListener=c,f.prependOnceListener=c,f.listeners=function(e){return[]},f.binding=function(e){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(e){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},function(e,t,n){"use strict";function a(e){var t=s[e].map(function(t){return new o.default(e,t).load(null,15e3).catch(function(e){console.log(e)})});return Promise.all(t)}Object.defineProperty(t,"__esModule",{value:!0});var r=n(17),o=function(e){return e&&e.__esModule?e:{default:e}}(r),i=n(0),s={PFHighwaySansPro:[{weight:100},{weight:200},{weight:300},{weight:400},{weight:500},{weight:700}],"FF More":[{weight:"normal"}]},l=document.body.classList.contains("default-font-family-ready"),c=document.body.classList.contains("ff-more-serif-ready");t.default=function(){if(!l){var e=new Date;e.setTime(e.getTime()+2592e6),a("PFHighwaySansPro").then(function(){document.body.classList.add("default-font-family-ready"),document.cookie="defaultfontloaded=1;path=/;expires="+e.toGMTString()+";"}).catch(function(e){console.warn("PFHighwaySans font family not loaded",e)})}if(!c&&(0,i.isArticle)()){var t=new Date;t.setTime(t.getTime()+2592e6),a("FF More").then(function(){document.body.classList.add("ff-more-serif-ready"),document.cookie="articlefontloaded=1;path=/;expires="+t.toGMTString()+";"}).catch(function(e){console.warn("FF More font family not loaded",e)})}}},function(e,t,n){!function(){function t(e,t){document.addEventListener?e.addEventListener("scroll",t,!1):e.attachEvent("scroll",t)}function n(e){document.body?e():document.addEventListener?document.addEventListener("DOMContentLoaded",function t(){document.removeEventListener("DOMContentLoaded",t),e()}):document.attachEvent("onreadystatechange",function t(){"interactive"!=document.readyState&&"complete"!=document.readyState||(document.detachEvent("onreadystatechange",t),e())})}function a(e){this.a=document.createElement("div"),this.a.setAttribute("aria-hidden","true"),this.a.appendChild(document.createTextNode(e)),this.b=document.createElement("span"),this.c=document.createElement("span"),this.h=document.createElement("span"),this.f=document.createElement("span"),this.g=-1,this.b.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.c.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.f.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.h.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.b.appendChild(this.h),this.c.appendChild(this.f),this.a.appendChild(this.b),this.a.appendChild(this.c)}function r(e,t){e.a.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;white-space:nowrap;font-synthesis:none;font:"+t+";"}function o(e){var t=e.a.offsetWidth,n=t+100;return e.f.style.width=n+"px",e.c.scrollLeft=n,e.b.scrollLeft=e.b.scrollWidth+100,e.g!==t&&(e.g=t,!0)}function i(e,n){function a(){var e=r;o(e)&&e.a.parentNode&&n(e.g)}var r=e;t(e.b,a),t(e.c,a),o(e)}function s(e,t){var n=t||{};this.family=e,this.style=n.style||"normal",this.weight=n.weight||"normal",this.stretch=n.stretch||"normal"}function l(){if(null===p)if(c()&&/Apple/.test(window.navigator.vendor)){var e=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(window.navigator.userAgent);p=!!e&&603>parseInt(e[1],10)}else p=!1;return p}function c(){return null===v&&(v=!!document.fonts),v}function u(){if(null===h){var e=document.createElement("div");try{e.style.font="condensed 100px sans-serif"}catch(e){}h=""!==e.style.font}return h}function d(e,t){return[e.style,e.weight,u()?e.stretch:"","100px",t].join(" ")}var f=null,p=null,h=null,v=null;s.prototype.load=function(e,t){var o=this,s=e||"BESbswy",u=0,p=t||3e3,h=(new Date).getTime();return new Promise(function(e,t){if(c()&&!l()){var v=new Promise(function(e,t){function n(){(new Date).getTime()-h>=p?t():document.fonts.load(d(o,'"'+o.family+'"'),s).then(function(t){1<=t.length?e():setTimeout(n,25)},function(){t()})}n()}),m=new Promise(function(e,t){u=setTimeout(t,p)});Promise.race([m,v]).then(function(){clearTimeout(u),e(o)},function(){t(o)})}else n(function(){function n(){var t;(t=-1!=_&&-1!=g||-1!=_&&-1!=b||-1!=g&&-1!=b)&&((t=_!=g&&_!=b&&g!=b)||(null===f&&(t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),f=!!t&&(536>parseInt(t[1],10)||536===parseInt(t[1],10)&&11>=parseInt(t[2],10))),t=f&&(_==y&&g==y&&b==y||_==w&&g==w&&b==w||_==k&&g==k&&b==k)),t=!t),t&&(j.parentNode&&j.parentNode.removeChild(j),clearTimeout(u),e(o))}function l(){if((new Date).getTime()-h>=p)j.parentNode&&j.parentNode.removeChild(j),t(o);else{var e=document.hidden;!0!==e&&void 0!==e||(_=c.a.offsetWidth,g=v.a.offsetWidth,b=m.a.offsetWidth,n()),u=setTimeout(l,50)}}var c=new a(s),v=new a(s),m=new a(s),_=-1,g=-1,b=-1,y=-1,w=-1,k=-1,j=document.createElement("div");j.dir="ltr",r(c,d(o,"sans-serif")),r(v,d(o,"serif")),r(m,d(o,"monospace")),j.appendChild(c.a),j.appendChild(v.a),j.appendChild(m.a),document.body.appendChild(j),y=c.a.offsetWidth,w=v.a.offsetWidth,k=m.a.offsetWidth,l(),i(c,function(e){_=e,n()}),r(c,d(o,'"'+o.family+'",sans-serif')),i(v,function(e){g=e,n()}),r(v,d(o,'"'+o.family+'",serif')),i(m,function(e){b=e,n()}),r(m,d(o,'"'+o.family+'",monospace'))})})},e.exports=s}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(19),r=function(e){return e&&e.__esModule?e:{default:e}}(a);t.default=function(){var e=(0,r.default)({normal:"data-src",threshold:50});return e.on("src:after",function(e){var t=void 0;if(e.dataset.bgimage){var n=e.getAttribute("src");t=new Image,t.src=n,e.removeAttribute("src"),e.style.backgroundImage="url("+n+")"}else t=e;t.onload=function(){e.classList.add("g-loaded")}}),e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=function(){function e(e,t){return i[e]=i[e]||[],i[e].push(t),this}function t(t,n){return n._once=!0,e(t,n),this}function n(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?i[e].splice(i[e].indexOf(t),1):delete i[e],this}function r(e){for(var t=this,a=arguments.length,r=Array(a>1?a-1:0),o=1;o<a;o++)r[o-1]=arguments[o];var s=i[e]&&i[e].slice();return s&&s.forEach(function(a){a._once&&n(e,a),a.apply(t,r)}),this}var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=Object.create(null);return a({},o,{on:e,once:t,off:n,emit:r})},o=function(){function e(){return window.scrollY||window.pageYOffset}function t(){d=e(),n()}function n(){f||(window.requestAnimationFrame(function(){return l()}),f=!0)}function a(e){return e.getBoundingClientRect().top+d}function o(e){var t=d,n=t+h,r=a(e),o=r+e.offsetHeight,i=v.threshold/100*h;return o>=t-i&&r<=n+i}function i(e){if(g.emit("src:before",e),m&&e.hasAttribute(v.srcset))e.setAttribute("srcset",e.getAttribute(v.srcset));else{var t=_>1&&e.getAttribute(v.retina);e.setAttribute("src",t||e.getAttribute(v.normal))}g.emit("src:after",e),[v.normal,v.retina,v.srcset].forEach(function(t){return e.removeAttribute(t)}),c()}function s(e){var n=e?"addEventListener":"removeEventListener";return["scroll","resize"].forEach(function(e){return window[n](e,t)}),this}function l(){return h=window.innerHeight,p.forEach(function(e){return o(e)&&i(e)}),f=!1,this}function c(){return p=Array.prototype.slice.call(document.querySelectorAll("["+v.normal+"]")),this}var u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},d=e(),f=void 0,p=void 0,h=void 0,v={normal:u.normal||"data-normal",retina:u.retina||"data-retina",srcset:u.srcset||"data-srcset",threshold:u.threshold||0},m=document.body.classList.contains("srcset")||"srcset"in document.createElement("img"),_=window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI,g=r({handlers:s,check:l,update:c});return g};t.default=o},function(e,t,n){"use strict";function a(e){e.pushManager.subscribe({userVisibleOnly:!0}).then(function(e){r(e)})}function r(e){var t=o(e.endpoint);t&&$.post(TJ.api+"pushsubscribe/",{token:t.value,ref:location.pathname+location.search},function(t){t.success?document.cookie="notify=1;path=/;expires=Fri, 31 Dec 2021 23:59:59 GMT;":e.unsubscribe()})}function o(e){var t=void 0,n=void 0;return n=e.split("gcm/send/")[1],n?t={value:n,type:"gcm"}:(n=e.split("wpush/v1/")[1])&&(t={value:n,type:"moz"}),t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){navigator.serviceWorker.ready.then(function(e){e.pushManager.getSubscription().then(function(t){t||e.pushManager.permissionState({userVisibleOnly:!0}).then(function(t){if("denied"==t)return!1;var n=document.querySelector("#push_banner");n?(document.querySelector("#push_banner_confirm").addEventListener("click",function(t){a(e)}),document.querySelector("#push_banner_cancel").addEventListener("click",function(e){document.cookie="notify=-10;path=/;expires=Fri, 31 Dec 9999 23:59:59 GMT;"}),n.querySelectorAll("button").forEach(function(e){e.addEventListener("click",function(e){n.classList.remove("push-banner--show")})})):a(e)})})})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){Array.from(document.querySelectorAll(".js-subscribe-form")).forEach(function(e){e.addEventListener("submit",function(t){var n=e.querySelector('input[type="email"]');if(n&&""==n.value)return t.preventDefault(),!1;if(e.classList.contains("js-subscribe-form-aside")&&e.dataset.delay){t.preventDefault();var a=1e3*parseFloat(e.dataset.delay),r=void 0,o=3e3;return window.addEventListener("blur",function(){window.blurred=!0}),window.addEventListener("focus",function(){window.blurred=!1}),e.classList.add("sending"),setTimeout(function(){e.submit()},a),setTimeout(function(){e.classList.remove("sending"),e.classList.add("sended"),r=setInterval(function(){window.blurred||(o-=100)<=0&&(clearInterval(r),e.parentNode.classList.add("hidden"))},100)},1e3),!1}e.classList.add("sended")})})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=document.querySelector("#wandering_subscribe");if(!e)return!1;document.querySelector("#wandering_subscribe_close").addEventListener("click",function(t){e.classList.add("minified")}),document.querySelector("#wandering_subscribe_minified").addEventListener("click",function(t){e.classList.remove("minified")})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){$(document).on("mouseover mouseout","a",function(e){$(this).hasClass("g-no-double-hover")||$("a").filter('[href="'+$(this).attr("href")+'"]').not(".g-no-double-hover").toggleClass("hover","mouseover"==e.type)})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){function e(e){return e*(Math.pow(e-1,3)+1)}function t(){var t,n,a,r,o=$(this),i=+o.offset().top,u={direction:"down",ratio:5};switch(o.attr("data-down")&&(u.direction="down",u.value=+o.attr("data-down")),o.attr("data-scale")&&(u.direction="scale",u.value=+o.attr("data-scale")),u.direction){case"down":s+c-i+u.value/u.ratio<0?o.css({transform:"translate(0,-"+u.value+"px)"}):s+c-i-50<0?(u.value/u.ratio,t=u.value*e((-s-c+i+u.value/u.ratio*2)/(50+u.value/u.ratio)),o.css({transform:"translate(0,"+-t+"px)"})):o.css({transform:"translate(0,0)"});break;case"scale":a=l/6.75,r=l/5.416,s+c-i+a<0?o.css({transform:"scale("+u.value+")"}):s+c-i-r<0?(n=(u.value-1)*(-s-c+i+r)/(a+r)+1,o.css({transform:"scale("+n+")"})):o.css({transform:"scale(1)"})}}function n(){s=r.height(),l=r.width(),c=r.scrollTop()||o.scrollTop(),a.each(t)}var a=$("[data-effect]");if(a.length){var r=$(window),o=$(document),i=$(document.body),s=r.height(),l=r.width(),c=r.scrollTop()||o.scrollTop();i.on("update-dom",function(){a=$("[data-effect]")}),r.on("resize",n).on("scroll",n).trigger("resize"),o.on("scroll",n)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),r=n(3),o=n(26),i=function(e){return e&&e.__esModule?e:{default:e}}(o),s=n(5);t.default=function(){(0,a.isArticle)()&&((0,r.incviews)(window.article.uid),(0,i.default)(),$(".fotorama").on("fotorama:load",function(e,t,n){n.frame.bordered&&n.frame.$stageFrame[0].classList.add("inset-bordered")}).fotorama({transition:"crossfade",nav:"thumbs",arrows:!1,auto:!1,click:!0}),$(".fotoramovna").on("fotorama:ready",function(){$(this).fotoramovna()}),(0,s.initUnfolders)(),$(window).load(function(){$(".article__wrapper:first > div:last").hasClass("highlight--wide")&&$(".article-footer").addClass("article-footer--yellow"),$(".article-body").hasClass("article--business-secrets")&&$(".article-footer").addClass("article-footer--dark"),$(".collection-item").each(function(e,t){$(t).find(".article__wrapper:first > div:last").hasClass("highlight--wide")&&$(t).find(".article-footer").addClass("article-footer--yellow")})}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){function e(){if(null==n){for(var e=getComputedStyle(t,""),r="",o=0;o<e.length;o++)0!=e[o].indexOf("overflow")&&0!=e[o].indexOf("padding")&&0!=e[o].indexOf("border")&&0!=e[o].indexOf("outline")&&0!=e[o].indexOf("box-shadow")&&0!=e[o].indexOf("background")||(r+=e[o]+": "+e.getPropertyValue(e[o])+"; ");n=document.createElement("div"),n.style.cssText=r+" box-sizing: border-box; width: "+t.offsetWidth+"px;",t.insertBefore(n,t.firstChild);for(var i=t.childNodes.length,o=1;o<i;o++)n.appendChild(t.childNodes[1]);t.style.height=n.getBoundingClientRect().height+"px",t.style.padding="0",t.style.border="0"}var s=t.getBoundingClientRect(),l=$(".conclusion").parent().parent().parent().find(".article-footer").offset().top,c=$(".conclusion").parent().parent().offset().top,u=Math.abs(s.top)+c+$(".conclusion .conclusion__list").height();s.top-a<=0?u>=l?(n.className="stop",n.style.top=l-c-$(".conclusion .conclusion__list").height()+"px"):(n.className="sticky",n.style.top=a+"px"):(n.className="",n.style.top="")}if(document.querySelector(".article-body")){var t=document.querySelector(".conclusion"),n=null,a=30;t&&(window.addEventListener("scroll",e,!1),document.body.addEventListener("scroll",e,!1),window.addEventListener("resize",function(){t.children[0].style.width=getComputedStyle(t,"").width},!1)),$(window).scroll(function(e){var t;if(t=$(".conclusion"),t.length){var n=t.parent().parent(),a=$(document).scrollTop(),r=n,o=t.find(".conclusion__list").height(),i=r.offset().top>=a+80,s=r.offset().top+r.height()<=a+o;if(s&&$(".conclusion-item:not(.conclusion-item--shown)").addClass("conclusion-item--shown"),!i&&!s){var l=$(".js-conclusion").length?".js-conclusion":".js-article-anchor";t.find("li, .article__conclusion-item").each(function(e){var t=$(this),n=$(r.find(l)[e]);if(n.length){var o=$(".conclusion-item--shown").last(),i=0;o.length&&(i=o.offset().top-o.height()-a);if(n.offset().top-i-30<=a)return t.addClass("conclusion-item--shown"),void(t.hasClass("conclusion-item--toc")&&($(".conclusion-item--toc.active").removeClass("active"),t.addClass("active")));t.removeClass("active")}})}}}),$("body").on("click",".conclusion-item--toc",function(){if(!$(this).hasClass("active")){var e=$(this).closest(".article-body"),t=$(this).index(),n=$($(".js-conclusion")[t]),a=n.offset().top;$("html, body").animate({scrollTop:a-20},250),setTimeout(function(){e.addClass("scrolling"),setTimeout(function(){e.removeClass("scrolling")},240)},10)}})}}},function(e,t,n){"use strict";(function(e){function a(e){return e&&e.__esModule?e:{default:e}}function r(e){Array.from(e.node.querySelectorAll(".cut")).forEach(function(t){t.addEventListener("click",function(t){e.loadRecommendations()})})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var t=document.querySelector(f);if(!t)return null;var n=Array.from(document.querySelectorAll(p)),a={URL_ROOT:e.URL_ROOT,archivedOnTop:e.TOP_ARTICLE_ARCHIVED,container:t,preloader:document.querySelector(".js-feed-preloader"),dynamic:"true"==t.dataset.dynamic,recommendations:t.dataset.recommendations||"none",endpoint:t.dataset.endpoint,scrollTop:(0,o.getDocumentScrollTop)(),currentArticleIndex:0,loading:!1,articles:[],appendArticle:function(e,t){var n={node:e,viewed:!1,uid:e.dataset.uid,id:parseInt(e.dataset.id),name:e.dataset.name,index:t,recommendationsLoaded:!1,setViewed:function(){this.viewed||((0,i.incviews)(this.uid),this.viewed=!0)},get offset(){return this.node.offsetTop},get isLast(){return this.index==a.articles.length-1},initHandlers:function(){(0,d.initUnfolders)(this.node),(0,l.default)(this.node),(0,u.default)(this.node),"click"===a.recommendations&&r(this)},loadRecommendations:function(){var e=this;if(this.recommendationsLoaded)return null;$.get(""+TJ.api+a.endpoint+"/"+this.id+"/recommendations",function(t){if(e.recommendationsLoaded=!0,""===t)return null;var n=a.articles[e.index+1];n&&n.node.classList.add("news-article--recommendations-before");var r=document.createElement("div");r.className="recommendations recommendations--small recommendations--collections-none",r.innerHTML=t,e.node.querySelector(".js-feed-article-wrapper").appendChild(r),(0,l.default)(e.recommendationsNode),(0,u.default)(e.recommendationsNode),Array.from(r.querySelectorAll("a")).forEach(function(e){e.href+="?utm_source="+a.endpoint+"_recommendations",e.setAttribute("target","_blank")}),window.lazyImages.update().check().handlers(!0)})}};return a.articles.push(n),n},get currentArticle(){var t=this.articles[this.currentArticleIndex];return t.title=e.FEED_DATA[t.id],t},get firstArticle(){return this.articles[0]},get lastArticle(){return this.articles[this.articles.length-1]},get totalArticles(){return this.articles.length},get url(){return""+location.origin+this.URL_ROOT+this.currentArticle.name+"/"},updatePageState:function(){(0,o.replaceHistoryState)(this.url,this.currentArticle.title)}};return n.forEach(function(e,t){a.appendArticle(e,t)}),a.articles.forEach(function(e){e.initHandlers()}),a.firstArticle.setViewed(),"none"!==a.recommendations&&a.firstArticle.loadRecommendations(),a.scrollHandler=function(){var e=!1,t=(0,o.getDocumentScrollTop)(),n=t>a.scrollTop?"down":"up";if(a.scrollTop=t,"down"==n)for(var r=a.currentArticleIndex+1;r<a.totalArticles;r++){var i=a.articles[r].offset-a.scrollTop;if(i<=h){e=!0,a.currentArticleIndex=r;break}}else a.currentArticle.offset-a.scrollTop>h&&(e=!0,a.currentArticleIndex--);if(e){var s=a.currentArticle;a.updatePageState(),s.setViewed(),s.isLast&&a.dynamic&&!a.loading&&a.loadMoreArticles(),"scroll"===a.recommendations&&s.loadRecommendations()}else a.scrollTop+window.innerHeight>(0,o.getDocumentHeight)()-v&&!a.loading&&a.loadMoreArticles()},a.articles.length>1&&window.addEventListener("scroll",a.scrollHandler,{passive:!0}),a.dynamic&&(a.loadMoreArticles=function(){a.loading=!0;var t=a.totalArticles;a.archivedOnTop&&t--;var n=""+TJ.api+a.endpoint+"/get?offset="+t;a.archivedOnTop&&(n+="&exclude="+a.firstArticle.id),a.preloader.classList.add("visible"),$.get(n,function(t){a.loading=!1,t.meta.forEach(function(t){e.FEED_DATA[t.id]=t.title}),t.data.forEach(function(e){var t=document.createElement("div"),n=void 0;t.innerHTML=e,t=t.firstChild,a.container.appendChild(t),n=a.appendArticle(t,a.totalArticles),n.initHandlers(),a.preloader.classList.remove("visible")})})}),a};var o=n(0),i=n(3),s=n(2),l=a(s),c=n(4),u=a(c),d=n(5),f=".js-feed",p=".js-feed-article",h=300,v=450}).call(t,n(1))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){function e(){t.forEach(function(e){var t=e.querySelector("img"),n=Array.from(e.querySelectorAll(".hints__item"));if(!t||!n.length)return!1;var a=e.querySelector(".u-signature");a&&e.parentNode.appendChild(a);var r=document.createElement("div");r.setAttribute("class","hints__viewbox"),t.parentNode.insertBefore(r,t),r.appendChild(t);for(var o=0;o<n.length;o++){var i=n[o],s=0;i.dataset.yp&&(s=parseFloat(i.dataset.yp)),i.style.top=s+"%";var l=i.dataset.xy?"POINT":i.dataset.yy?"AREA":"UNKNOWN",c=i.parentNode.classList.contains("hints__column--left")||"left"==i.dataset.side?"LEFT":"RIGHT";if(i.classList.add("hints__item--"+("LEFT"==c?"leftside":"rightside")),"POINT"==l){var u=parseFloat(i.dataset.xy.split(" ")[0]),d=parseFloat(i.dataset.xy.split(" ")[1]);if(!u||!d)continue;var f=d>s?"TO_BOTTOM":d<s?"TO_TOP":"STRAIGHT",p=document.createElement("div");p.setAttribute("class","hints__line-box"),"LEFT"==c?(p.style.width=u+"%",p.style.left=0,p.style.paddingLeft="25px",p.style.marginLeft="-25px"):"RIGHT"==c&&(p.style.width=100-u+"%",p.style.left=u+"%",p.style.paddingRight="25px"),p.style.height=Math.abs(d-s)+"%",p.style.bottom=100-("TO_BOTTOM"==f?d:s)+"%";var h=document.createElementNS("http://www.w3.org/2000/svg","svg"),v=document.createElementNS("http://www.w3.org/2000/svg","line");h.setAttribute("class","hints__line"),h.setAttribute("preserveAspectRatio","none"),v.setAttribute("stroke-linecap","round"),v.setAttribute("vector-effect","non-scaling-stroke"),h.setAttribute("viewBox","0 0 1 1"),v.setAttribute("x1",0),v.setAttribute("x2",1),"LEFT"==c?(h.classList.add("hints__line--to-right"),"TO_BOTTOM"==f?(v.setAttribute("y1",0),v.setAttribute("y2",1)):(v.setAttribute("y1",1),v.setAttribute("y2",0))):"RIGHT"==c&&(h.classList.add("hints__line--to-left"),"TO_BOTTOM"==f?(v.setAttribute("y1",1),v.setAttribute("y2",0)):(v.setAttribute("y1",0),v.setAttribute("y2",1))),"STRAIGHT"==f?(v.setAttribute("y1",0),v.setAttribute("y2",0),h.classList.add("hints__line--horizontal")):h.classList.add("hints__line--to-"+("TO_BOTTOM"==f?"bottom":"top")),h.appendChild(v),p.appendChild(h),r.appendChild(p)}else if("AREA"==l){var m=parseFloat(i.dataset.yy.split(" ")[0]),_=parseFloat(i.dataset.yy.split(" ")[1]);if(!m||!_)continue;var g=_-m;i.style.top=_-g/2+"%",i.style.marginTop=i.offsetHeight/-2-4+"px";var b=document.createElement("div");b.setAttribute("class","hints__area hints__area--"+("LEFT"==c?"leftside":"rightside")),b.style.height=g+"%",b.style.top=m+"%",r.appendChild(b)}i.classList.add("visible")}e.classList.add("loaded")})}var t=Array.from(document.querySelectorAll(".hints"));if(!t.length||screen.width<900)return!1;window.addEventListener("load",e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=Array.from(document.querySelectorAll(".js-stiralochka"));e.length&&(window.stiralochkas=[],e.forEach(function(e){stiralochkas.push(new r.default({wrapper:e,incomeDefaults:o.incomeDefaults,outlayDefaults:o.outlayDefaults,minRowsCount:4}))}))};var a=n(30),r=function(e){return e&&e.__esModule?e:{default:e}}(a),o=n(35)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(31),s=n(32),l=(a(s),n(34)),c=a(l),u=n(6),d=(a(u),'<span class="ruble">Р</span>'),f=function(){function e(t){r(this,e);var n=t.wrapper,a=t.incomeDefaults,o=t.outlayDefaults,i=t.minRowsCount,s=t.minMonthBudget;this._minRowsCount=i||3,this._minMonthBudget=s||3e3,this._wrapper=$(n),this._wrapper.addClass("stiralochka__wrapper"),this._calculated={},this._prevState={},this.render(a,o),this.update(),this.initHandlers()}return o(e,[{key:"getErrors",value:function(e,t){var n={minusBudget:!1,zeroIncome:!1};return 0==e.totalIncome&&(n.zeroIncome=!0),t.monthBudget<0&&(n.minusBudget=!0),n}},{key:"calculate",value:function(e,t){var n=t.totalIncome,a=t.totalOutlay,r=t.savePercent,o=n-a,i=r/100*o,s=o-i;return{monthBudget:o,spendMonth:s,dayBudget:s/30,saveMonth:i,saveHalfYear:6*i,saveYear:12*i}}},{key:"showErrors",value:function(e){var t=this._wrapper.find(".js-stiralochka__second-heading"),n=this._wrapper.find(".js-stiralochka__playzone"),a=this._wrapper.find(".js-stiralochka__month-budget-label"),r=this._wrapper.find(".js-stiralochka__day-budget-label"),o=this._wrapper.find('.js-stiralochka__error[data-error="minus-budget"]');e.zeroIncome||e.minusBudget?(n.addClass("stiralochka__playzone--disabled"),t.addClass("stiralochka__heading--disabled")):(n.removeClass("stiralochka__playzone--disabled"),t.removeClass("stiralochka__heading--disabled")),e.zeroIncome?(a.addClass("stiralochka__unset"),r.addClass("stiralochka__unset")):(a.removeClass("stiralochka__unset"),r.removeClass("stiralochka__unset")),!e.zeroIncome&&e.minusBudget?(a.addClass("stiralochka__error"),r.addClass("stiralochka__error")):(a.removeClass("stiralochka__error"),r.removeClass("stiralochka__error")),!e.zeroIncome&&e.minusBudget?(r.hide(),o.show()):(r.show(),o.hide())}},{key:"getRowsFilling",value:function(e){return this._wrapper.find(".js-stiralochka__"+e+"-row").toArray().map(function(e){return $(e).find('input[type="text"]').toArray().some(function(e){return e.value})})}},{key:"updateRows",value:function(){var e=this.getRowsFilling("income"),t=this.getRowsFilling("outlay"),n=this._wrapper.find(".js-stiralochka__income-inputs"),a=this._wrapper.find(".js-stiralochka__outlay-inputs");if(e.every(function(e){return e})||t.every(function(e){return e})){var r=this.createRow({prefix:"income"}),o=this.createRow({prefix:"outlay"});n.append(r),a.append(o)}e.slice(-2).every(function(e){return!e})&&e.length>this._minRowsCount&&t.slice(-2).every(function(e){return!e})&&t.length>this._minRowsCount&&(n.children(".js-stiralochka__row").last().remove(),a.children(".js-stiralochka__row").last().remove())}},{key:"updateRangeStart",value:function(e){this._wrapper.find(".js-stiralochka__save-percent-slider").get(0).noUiSlider.updateOptions({start:[e]})}},{key:"updateRangeMax",value:function(e,t){if(e!=t){var n=this._wrapper.find(".js-stiralochka__save-percent-slider"),a=n.get(0).noUiSlider;t||(t=1),a.updateOptions({range:{min:0,max:t}})}}},{key:"updateRangeNotice",value:function(e,t){var n=(this._wrapper.find(".js-stiralochka__save-wrapper"),this._wrapper.find(".js-stiralochka__range-spend")),a=(this._wrapper.find(".js-stiralochka__save-percent-slider"),this._wrapper.find(".js-stiralochka__noui-wrapper"),e.savePercent),r=(t.savePercentOutOfFree,this._wrapper.find(".js-stiralochka__labels")),o=this._wrapper.find(".js-stiralochka__save-percent-range"),i=(this._wrapper.find(".js-stiralochka__range-wrapper"),this._wrapper.find(".js-stiralochka__spend-label")),s=this._wrapper.find(".js-stiralochka__save");this._wrapper.find(".js-stiralochka__save-percent-slider .noUi-origin").css("left",a+"%"),o.css({right:100-a+"%"});var l=n.width()*a/100;n.width();i.offset().left+i.width()>$(window).width()?r.addClass("stiralochka__labels--wrap"):r.removeClass("stiralochka__labels--wrap"),l+35<s.outerWidth()&&$(window).width()<960?r.addClass("stiralochka__labels--left-wrap"):r.removeClass("stiralochka__labels--left-wrap")}},{key:"updateRublePosition",value:function(e){var t=e.value?e.value:e.placeholder,n=e.value.length>0,a=$(e).parent().find(".js-stiralochka__amount-helper"),r=$(e).parent().find(".js-stiralochka__amount-ruble");a.html(t),n?r.removeClass("stiralochka__amount-ruble--placeholder"):r.addClass("stiralochka__amount-ruble--placeholder"),t?r.show():r.hide()}},{key:"updateRublesPosition",value:function(){var e=this;this._wrapper.find(".js-stiralochka__income-amount, .js-stiralochka__outlay-amount").toArray().forEach(function(t){return e.updateRublePosition(t)})}},{key:"update",value:function(){var e=this.state,t=(this._prevState,this._calculated),n=this.calculate(this._prevState,e);this._calculated=n,this._prevState=e;var a=this.getErrors(e,n);this.showErrors.bind(this)(a),t.monthBudget!=n.monthBudget&&this._wrapper.find(".js-stiralochka__month-budget").text((0,i.formatNumber)(n.monthBudget)),this._wrapper.find(".js-stiralochka__total-income").text((0,i.formatNumber)(e.totalIncome)),this._wrapper.find(".js-stiralochka__total-outlay").text((0,i.formatNumber)(e.totalOutlay)),this._wrapper.find(".js-stiralochka__save-month").text((0,i.formatNumber)(n.saveMonth)),this._wrapper.find(".js-stiralochka__spend").text((0,i.formatNumber)(n.spendMonth)),this._wrapper.find(".js-stiralochka__save-half-year").text((0,i.formatNumber)(n.saveHalfYear)),this._wrapper.find(".js-stiralochka__save-year").text((0,i.formatNumber)(n.saveYear)),this._wrapper.find(".js-stiralochka__save-percent").text((0,i.formatNumber)(e.savePercent)),this._wrapper.find(".js-stiralochka__day-budget").text((0,i.formatNumber)(n.dayBudget)),this.updateRublesPosition(),this.updateRangeNotice(e,n);this._wrapper.find(".js-stiralochka__save-percent-slider").hasClass("js-stiralochka__dragged"),this._wrapper.find(".js-stiralochka__save-percent-slider")[0].noUiSlider.options.start}},{key:"initHandlers",value:function(){var e=this;this._wrapper.on("keyup keydown change",".js-stiralochka__income-amount, .js-stiralochka__outlay-amount",function(t){9!=t.keyCode&&(e.updateRows(),e.update.bind(e)(),(0,i.formatNumberInput)(t),e.updateRublePosition(t.target))}),this._wrapper.on("keyup keydown change",".js-stiralochka__income-title, .js-stiralochka__outlay-title",function(t){var n=$(t.target),a=n.val().match(/\d+/g);if(e.updateRows(),!(null==a||n.val().length>1)){var r=n.parent(),o=r.find(".js-stiralochka__income-amount, .js-stiralochka__outlay-amount");o.val()||o.val(a[0]),o.focus(),n.val(n.val().replace(/\d+/gi,""))}}),this._wrapper.on("focus",".js-stiralochka__income-title, .js-stiralochka__outlay-title",function(e){e.target.placeholder=""}),this._wrapper.on("blur",".js-stiralochka__income-title, .js-stiralochka__outlay-title",function(e){var t=e.target;t.placeholder=t.dataset.placeholder}),this._wrapper.on("focus",".js-stiralochka__income-amount",function(e){e.target.parentNode.classList.add("focused")}),this._wrapper.on("blur",".js-stiralochka__income-amount",function(e){e.target.parentNode.classList.remove("focused")}),this._wrapper.on("focus",".js-stiralochka__income-amount, .js-stiralochka__outlay-amount",function(t){var n=t.target;n.placeholder="",e.updateRublePosition(n)}),this._wrapper.on("blur",".js-stiralochka__income-amount, .js-stiralochka__outlay-amount",function(t){var n=t.target;n.placeholder=n.dataset.placeholder,e.updateRublePosition(n)});var t=this._wrapper.find(".js-stiralochka__save-percent"),n=this._wrapper.find(".js-stiralochka__save-percent-slider"),a=n.get(0).noUiSlider;a.on("update",function(t,n){e._wrapper.find(".js-stiralochka__save-percent-data").get(0).value=t[n]}),this._wrapper.on("change",".js-stiralochka__save-percent-data",function(e){a.set(e.target.value)}),a.on("start",function(){t.addClass("stiralochka__save-percent--active")}),a.on("end",function(){t.removeClass("stiralochka__save-percent--active")}),a.on("slide",function(){n.addClass("js-stiralochka__dragged"),e.update.bind(e)()}),this._wrapper.on("input change",".js-stiralochka__case",function(){e.update.bind(e)()}),$(window).on("resize",function(){e.updateRangeNotice(e.state,e._calculated)})}},{key:"createInput",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return $('<input\n       type="text"\n       class="stiralochka__input '+n+'"\n       value="'+e+'"\n       placeholder="'+t+'"\n       data-placeholder="'+t+'"\n       />')}},{key:"createRow",value:function(e){var t=e.title,n=e.titlePlaceholder,a=e.amount,r=e.amountPlaceholder,o=e.prefix,s=$('<div class="stiralochka__row js-stiralochka__row js-stiralochka__'+o+'-row"></div>'),l=this.createInput(t,n,"stiralochka__row--title js-stiralochka__"+o+"-title"),c=this.createInput((0,i.formatNumber)(a),(0,i.formatNumber)(r),"js-stiralochka__"+o+"-amount"),u=$('<div class="stiralochka__row--amount">\n      </div>'),f=$('<div class="stiralochka__amount-helper">\n        <div class="stiralochka__amount-copy js-stiralochka__amount-helper">\n          '+((0,i.formatNumber)(a)||(0,i.formatNumber)(r))+'\n        </div>\n        <div class="stiralochka__amount-ruble js-stiralochka__amount-ruble">\n          '+d+"\n        </div>\n      </div>");return u.append(c,f),s.append(l,u),s}},{key:"createRows",value:function(e,t,n){for(var a=[],r=0;r<e;r++){var o=r in t?t[r]:{title:"",titlePlaceholder:"",amount:"",amountPlaceholder:""},i=this.createRow(Object.assign({},o,{prefix:n}));a.push(i)}return a}},{key:"createOpenBracket",value:function(){return $('<div class="stiralochka__bracket stiralochka__bracket--open">\n        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="100%" viewBox="0 0 16 126" version="1.1" preserveAspectRatio="none">\n          <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n            <path d="M15.7 125C7.6 125 1 97.2 1 63 1 28.8 7.6 1 15.7 1" stroke="#0000FF" stroke-width="0.5"/>\n          </g>\n        </svg>\n      </div>')}},{key:"createCloseBracket",value:function(){return $('<div class="stiralochka__bracket stiralochka__bracket--close">\n        <svg xmlns="http://www.w3.org/2000/svg" width="15" height="100%" viewBox="0 0 15 126" version="1.1" preserveAspectRatio="none">\n          <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n            <path d="M14.7 125C6.6 125 0 97.2 0 63 0 28.8 6.6 1 14.7 1" stroke="#0000FF" stroke-width="0.5" transform="translate(7.335000, 63.000000) scale(-1, 1) translate(-7.335000, -63.000000) "/>\n          </g>\n        </svg>\n      </div>')}},{key:"createEntry",value:function(e,t,n){var a=$('<div class="stiralochka__entry"></div>'),r=this.createRows(e,t,"income"),o=this.createRows(e,n,"outlay"),i=$('<h5 class="stiralochka__entry-heading stiralochka__capital-title">Сколько вы зарабатываете</h5>'),s=$('<div class="stiralochka__block stiralochka__block--income">\n      </div>'),l=$('<div class="stiralochka__inputs stiralochka__inputs--income js-stiralochka__income-inputs">\n      </div>');l.append(i);var c=$('<div class="stiralochka__inputs stiralochka__inputs--outlay js-stiralochka__outlay-inputs">\n        <h5 class="stiralochka__entry-heading stiralochka__capital-title">\n          Обязательные траты\n        </h5>\n      </div>'),u=$('<div class="stiralochka__block stiralochka__block--outlay">\n      </div>');l.append(this.createOpenBracket(),this.createCloseBracket(),r),c.append(this.createOpenBracket(),this.createCloseBracket(),o),s.append(l),u.append(c);var f=$('<div class="stiralochka__block stiralochka__minus"></div>'),p=$('<div class="stiralochka__block stiralochka__equal"></div>'),h=$('<div class="stiralochka__block stiralochka__helper"></div>'),v=$('<div class="stiralochka__block stiralochka__difference">\n        <div class="stiralochka__difference--inner">\n          <div class="stiralochka__big-number js-stiralochka__month-budget-label">\n            <span class="js-stiralochka__month-budget"></span> '+d+' в месяц\n          </div>\n          <div class="stiralochka__text stiralochka__text--error js-stiralochka__error" data-error="minus-budget">\n            У вас отрицательный бюджет\n          </div>\n        </div>\n      </div>');return a.append(s,f,u,h,p,v),a}},{key:"createSlider",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.01,r=$('<div class="stiralochka__label stiralochka__spend js-stiralochka__spend-label">\n          <h5 class="stiralochka__micro-title">Тратить</h5>\n          <div class="stiralochka__amount">\n            <span class="js-stiralochka__spend"></span> '+d+"\n          </div>\n        </div>"),o=$('<div class="stiralochka__label stiralochka__save js-stiralochka__save">\n       <h5 class="stiralochka__micro-title">Откладывать</h5>\n        <div class="stiralochka__amount">\n           <span class="js-stiralochka__save-month"></span> '+d+'\n         </div>\n        <div class="stiralochka__estimate">\n          <p class="stiralochka__summary-p">\n            <span class="js-stiralochka__save-half-year"></span> '+d+' за полгода\n          </p>\n          <p class="stiralochka__summary-p">\n            <span class="js-stiralochka__save-year"></span> '+d+" за год\n          </p>\n        </div>\n       </div>"),i=$('<div class="stiralochka__range-wrapper js-stiralochka__range-wrapper">\n        </div>'),s=$('<div class="stiralochka__range-spend js-stiralochka__range-spend">\n        <div class="stiralochka__save-percent js-stiralochka__save-percent js-stiralochka__save-percent-range"></div>\n      </div>'),l=new c.default({defaultValue:n,step:a,min:e,max:t,beforeColor:"blue",beforeWidth:1,afterColor:"blue",afterWidth:4,className:"js-stiralochka__save-percent-slider",direction:"ltr"}),u=$('<div class="stiralochka__noui-wrapper js-stiralochka__noui-wrapper">\n        <input type="hidden" class="js-stiralochka__save-percent-data" value="'+n+'" data-default-value="'+n+'"/>\n      </div>');u.append(l.wrapper),s.append(u),i.append(s);var f=$('<div class="stiralochka__desktop stiralochka__labels js-stiralochka__labels"></div>');f.append(o,r),l.updateHandleContent(f);var p=$('<div class="stiralochka__slider"></div>');return p.append(i),p}},{key:"render",value:function(e,t,n){var a=this.createEntry,r=(this.createSummary,this.createSlider),o=(this.createCasesView,this.createSuggested,this._minRowsCount),i=(this._maxCasesCount,$('<h3 class="stiralochka__heading">\n        <span class="stiralochka__desktop">Бюджет на месяц</span>\n        <span class="stiralochka__mobile">1. Рассчитайте бюджет на месяц</span>\n      </h3>')),s=$('<h3 class="stiralochka__heading">\n        <span class="stiralochka__desktop">Сбережения в месяц</span>\n        <span class="stiralochka__mobile">2. Чтобы понять сколько тратить в день, решите сколько вы хотите откладывать в месяц</span>\n      </h3>'),l=$('<h3 class="stiralochka__heading stiralochka__heading--day-budget">\n        Бюджет на день\n      </h3>'),c=$('<div class="stiralochka__day-budget">\n        <span class="js-stiralochka__day-budget"></span> '+d+"\n      </div>"),u=a.bind(this)(o,e,t),f=r(0,100,30),p=$('<div class="stiralochka__playzone js-stiralochka__playzone"></div>'),h=$('<div class="stiralochka__mobile stiralochka__mobile-labels">\n        <div class="stiralochka__label stiralochka__label--mobile">\n          <h5 class="stiralochka__micro-title">Откладывать</h5>\n           <div class="stiralochka__amount">\n              <span class="js-stiralochka__save-month"></span> '+d+'\n            </div>\n        </div>\n        <div class="stiralochka__labels-divider">\n        </div>\n        <div class="stiralochka__label stiralochka__label--mobile">\n          <h5 class="stiralochka__micro-title">Тратить</h5>\n           <div class="stiralochka__amount">\n              <span class="js-stiralochka__spend"></span> '+d+"\n            </div>\n        </div>\n      </div>");p.append(s,h,f,l,c),this._wrapper.append(i,u,p)}},{key:"totalIncome",get:function(){var e=0;return this._wrapper.find(".js-stiralochka__income-amount").each(function(t,n){var a=parseFloat(n.value.split(/\s/).join(""));e+=a||0}),e}},{key:"totalOutlay",get:function(){var e=0;return this._wrapper.find(".js-stiralochka__outlay-amount").each(function(t,n){var a=parseFloat(n.value.split(/\s/).join(""));e+=a||0}),e}},{key:"savePercent",get:function(){return parseFloat(this._wrapper.find(".js-stiralochka__save-percent-slider").get(0).noUiSlider.get())}},{key:"state",get:function(){return{totalIncome:this.totalIncome,totalOutlay:this.totalOutlay,savePercent:this.savePercent}}},{key:"errors",get:function(){return this.getErrors(this.state,this._calculated)}}]),e}();t.default=f},function(e,t,n){"use strict";function a(e){return 96<=e&&e<=105}function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return""==e||isNaN(e)?e:(e=parseFloat(e).toFixed(t),-0==e?0:e<0?"-"+r(-e):e<1e4?e:e.toString().replace(/(\d)(?=(\d{3})+(\D|$))/g,"$1 "))}function o(e){var t=e.target,n=t.value;if(""!=n){var o=t.selectionStart;if("keydown"==e.type&&!String.fromCharCode(e.keyCode).match(/\d/)&&-1==s.indexOf(e.keyCode)&&!a(e.keyCode))return void e.preventDefault();var l=r((0,i.clearNumber)(n.split(/\s/).join("")));if(l!=n){var c=n.slice(0,o);if(l){var u=l.slice(0,o),d=c.match(/\s/)?c.match(/\s/).length:0,f=u.match(/\s/)?u.match(/\s/).length:0,p=f-d;t.value=l,t.selectionEnd=o+p}}}}Object.defineProperty(t,"__esModule",{value:!0}),t.formatNumber=r,t.formatNumberInput=o;var i=n(0),s=[8,16,17,18,37,38,39,40,91,93]},function(e,t,n){"use strict";function a(e){var t=Math.round(e/30);if(t<1)return e+" "+(0,r.getDayWord)(e);var n=(t/12).toFixed(1);return n<1?t+" "+(0,r.getMonthWord)(t):n.replace(".",",")+" "+(0,r.getYearWord)(parseInt(n))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var r=n(33)},function(e,t,n){"use strict";function a(e){return e%=100,e>20&&(e%=10),1==e?"день":2<=e&&e<=4?"дня":0==e||5<=e&&e<=20?"дней":void 0}function r(e){return e%=100,e>20&&(e%=10),1==e?"месяц":2<=e&&e<=4?"месяца":0==e||5<=e&&e<=20?"месяцев":void 0}function o(e){return e%=100,e>20&&(e%=10),1==e?"год":2<=e&&e<=4?"года":0==e||5<=e&&e<=20?"лет":void 0}Object.defineProperty(t,"__esModule",{value:!0}),t.getDayWord=a,t.getMonthWord=r,t.getYearWord=o},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=n(6),i=function(e){return e&&e.__esModule?e:{default:e}}(o),s=function(){function e(t){var n=this;a(this,e);var r=t.defaultValue,o=t.min,s=t.max,l=t.className,c=t.beforeColor,u=t.afterColor,d=t.beforeWidth,f=t.afterWidth,p=t.onChange,h=t.direction,v=t.handleContent;h||(h="ltr"),this._sliderOptions={start:[r],range:{min:o,max:s},direction:h},this._wrapper=this.createWrapper(l).css({borderBottom:d+"px solid "+(c||"black")}),this._after=this.createAfter(h).css({background:u,height:f+"px"}),this._wrapperNode=this._wrapper.get(0),i.default.create(this._wrapperNode,this._sliderOptions),v&&this.updateHandleContent(v),this._wrapper.append(this._after),this._wrapperNode.noUiSlider.on("update",function(){n.update(),p&&p()}),this.update()}return r(e,[{key:"update",value:function(){var e=this.filledPercent;this._after.css({width:e+"%"})}},{key:"createWrapper",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return $('<div class="highlighted-range__wrapper '+e+'"></div>')}},{key:"createAfter",value:function(e){return $('<div class="highlighted-range__after highlighted-range__after--'+e+'"></div>')}},{key:"updateHandleContent",value:function(e){this._wrapper.find(".noUi-handle").append(e)}},{key:"removeHandleContent",value:function(){this._wrapper.find(".noUi-handle").children().remove()}},{key:"min",get:function(){return this._wrapperNode.noUiSlider.options.range.min}},{key:"max",get:function(){return this._wrapperNode.noUiSlider.options.range.max}},{key:"value",get:function(){return this._wrapperNode.noUiSlider.get()}},{key:"filledPercent",get:function(){return 100*(this.value-this.min)/(this.max-this.min)}},{key:"wrapper",get:function(){return this._wrapper}}]),e}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.incomeDefaults=[{titlePlaceholder:"Зарплата",amountPlaceholder:0},{titlePlaceholder:"Фриланс",amountPlaceholder:0},{titlePlaceholder:"От родителей",amountPlaceholder:0}],t.outlayDefaults=[{titlePlaceholder:"Cъем квартиры",amountPlaceholder:0},{titlePlaceholder:"ЖКХ",amountPlaceholder:0},{titlePlaceholder:"Транспорт",amountPlaceholder:0}]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=Array.from(document.querySelectorAll(".js-spontaneous-calculator"));e.length&&(window.spontaneousCalculators=[],e.forEach(function(e){spontaneousCalculators.push(new r.default({wrapper:e,incomeDefaults:o.incomeDefaults,outlayDefaults:o.outlayDefaults,spontaneousDefaults:o.spontaneousDefaults,spending:i.spending,minRowsCount:4}))}))};var a=n(37),r=function(e){return e&&e.__esModule?e:{default:e}}(a),o=n(42),i=n(43)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(){return $(window).width()<=800}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(38),l=n(39),c=(a(l),n(40)),u=a(c),d=n(41),f=a(d),p='<span class="ruble">Р</span>',h=function(){function e(t){r(this,e);var n=t.wrapper,a=t.incomeDefaults,o=t.outlayDefaults,i=t.spontaneousDefaults,s=t.spending,l=t.minRowsCount;this._options=t,this._minRowsCount=l||3,this._wrapper=$(n),this._wrapper.addClass("spontaneous-calculator__wrapper"),this._calculated={},this._prevState={},this._updateEntryWrapperHeightDebounced=(0,u.default)(this.updateEntryWrapperHeight,1100),this._updateEntryWrapperHeightDebounced2=(0,u.default)(this.updateEntryWrapperHeight,200),this.render(a,o,i,s),this.update(),this.handleResize(),this.initHandlers(),this.startAnimateSpending()}return i(e,[{key:"getSyncOption",value:function(){var e=$(window).width();return e<=800?[]:e<=1156?["outlay","spontaneous"]:["income","outlay","spontaneous"]}},{key:"getErrors",value:function(e,t){var n={minusBudget:!1,zeroIncome:!1};return 0==e.totalIncome&&(n.zeroIncome=!0),t.monthBudget<0&&(n.minusBudget=!0),n}},{key:"calculate",value:function(e,t){var n=t.totalIncome,a=t.totalRequired,r=t.totalSpontaneous,o=a+r,i=n-o,s=i/30,l=a/30,c=r/30;return(0==n||i<0)&&(n=a+r),{monthBudget:i,totalRequired:a,totalSpontaneous:r,dayBudget:s,dayRequired:l,daySpontaneous:c,shareRequired:a/n,shareSpontaneous:r/n,totalOutlay:o}}},{key:"showErrors",value:function(e){var t=this._wrapper.find(".js-sc__free-money-heading"),n=(this._wrapper.find(".js-sc__playzone"),this._wrapper.find(".js-sc__day-budget-amount")),a=this._wrapper.find(".js-sc__needed-bubble"),r=this._wrapper.find(".js-sc__needed-income-mobile"),i=(e.minusBudget,e.minusBudget?"addClass":"removeClass"),s=!o()&&e.minusBudget?"addClass":"removeClass",l=e.minusBudget?"Вы в минусе":"Свободные деньги";t[s]("spontaneous-calculator__error"),t.text(l),n[s]("spontaneous-calculator__error"),a[i]("spontaneous-calculator__needed-bubble--active"),r[i]("spontaneous-calculator__day-budget-notice--active")}},{key:"getRowsFilling",value:function(e){return this._wrapper.find(".js-sc__"+e+"-row").toArray().map(function(e){return $(e).find('input[type="text"]').toArray().some(function(e){return e.value&&"0"!=e.value})})}},{key:"setDefaultPlaceholders",value:function(e){var t=this._wrapper.find(".js-sc__"+e+"-row"),n=this._options[e+"Defaults"];t.toArray().some(function(t,a){if(a>n.length-1)return!0;$(t).find(".js-sc__"+e+"-title")[0].placeholder=n[a].titlePlaceholder;var r=$(t).find(".js-sc__"+e+"-amount");r[0].placeholder=n[a].amountPlaceholder,r.attr("data-placeholder",n[a].amountPlaceholder)})}},{key:"setDefaultPlaceholdersAll",value:function(){this.setDefaultPlaceholders("income"),this.setDefaultPlaceholders("outlay"),this.setDefaultPlaceholders("spontaneous")}},{key:"appendRows",value:function(e,t){for(var n=this._wrapper.find(".js-sc__"+e+"-inputs"),a=[],r=0;r<t;r++)a.push(this.createRow({prefix:e}));n.append(a)}},{key:"removeEmptyRow",value:function(e,t){var n=this._wrapper.find(".js-sc__"+e+"-inputs"),a=this.getRowsData(e),r=a.slice(0,-1).map(function(e,t){return e.title.value||e.amount.value?-1:t}).filter(function(e){return e>-1});r.length&&(a.splice(r[0],1),n.find(".js-sc__row").length>t&&n.find(".js-sc__row").last().remove(),this.setRowsData(e,a))}},{key:"updateEntryWrapperHeight",value:function(){var e=this._wrapper.find(".js-sc__entry"),t=this._wrapper.find(".js-sc__entry-wrapper"),n=e.outerHeight();t.height(n)}},{key:"updateRows",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{removeAllowed:!1},a=n.removeAllowed,r=["income","outlay","spontaneous"],o=r.map(function(e){return t.getRowsFilling(e)}),i=Math.max.apply(null,e.map(function(e){return t.getRowsFilling(e)}).map(function(e){return e.filter(function(e){return e}).length}));r.forEach(function(n,s){var l=o[s],c=e.indexOf(n)>-1,u=[l.length>t._minRowsCount||a&&n==r[2],l.slice(0,-1).some(function(e){return!e}),c&&l.length>i+1||!c].every(Boolean),d=c?i+1-l.length:1;u?(t.removeEmptyRow(n,c?Math.max(i,t._minRowsCount):t._minRowsCount),c?t._updateEntryWrapperHeightDebounced():t.updateEntryWrapperHeight()):(l.every(function(e){return e})||c&&i+1-l.length)&&(t.appendRows(n,d),t.updateEntryWrapperHeight())}),this.updateRublesPosition(),this.setDefaultPlaceholdersAll()}},{key:"updateLine",value:function(e,t){var n=this._wrapper.find(".js-sc__line"),a=(this._wrapper.find(".js-sc__line--free"),this._wrapper.find(".js-sc__line--required")),r=this._wrapper.find(".js-sc__line--spontaneous"),o=this._wrapper.find(".js-sc__line").outerWidth();a.width(100*t.shareRequired+"%"),a.toggle(Boolean(e.totalRequired)),o*t.shareRequired<145&&e.totalSpontaneous&&e.totalRequired?(n.addClass("spontaneous-calculator__line--small"),a.addClass("spontaneous-calculator__line-sector--small")):(n.removeClass("spontaneous-calculator__line--small"),a.removeClass("spontaneous-calculator__line-sector--small")),r.width(100*t.shareSpontaneous+"%"),r.toggle(Boolean(e.totalSpontaneous))}},{key:"updateRublePosition",value:function(e){var t=e.value.length>0,n=t?e.value:e.placeholder,a=$(e).parent().find(".js-sc__amount-helper"),r=$(e).parent().find(".js-sc__amount-ruble");a.html(n),r[t?"removeClass":"addClass"]("spontaneous-calculator__amount-ruble--placeholder"),r[n?"show":"hide"]()}},{key:"updateRublesPosition",value:function(){var e=this;this._wrapper.find(".js-sc__income-amount,\n       .js-sc__outlay-amount,\n       .js-sc__spontaneous-amount").toArray().forEach(function(t){return e.updateRublePosition(t)})}},{key:"updateSpendingAlign",value:function(){var e=this._wrapper.offset().left;this._wrapper.find(".js-sc__spending").css({left:-e+"px"})}},{key:"updateInputOverflow",value:function(e){var t=e[0].value.length>e[0].size,n=e.parent();if(!t)return void n.removeClass("spontaneous-calculator__input-wrapper--overflowed");n.addClass("spontaneous-calculator__input-wrapper--overflowed")}},{key:"updateInputs",value:function(){var e=this._wrapper.find(".js-sc__spontaneous-block");o()?e.appendTo(".js-sc__spontaneous-inputs-mobile"):e.insertBefore(".js-sc__entry-equal")}},{key:"updateMobileLine",value:function(e){var t=(e.totalIncome,e.totalRequired,e.totalSpontaneous),n=this._wrapper.find(".js-sc__mobile-line");n[t&&o()?"addClass":"removeClass"]("spontaneous-calculator__line-wrapper--active"),n.fixedsticky("update")}},{key:"handleResize",value:function(){var e=this.state,t=this._calculated;this.updateLine(e,t),this.updateSpendingAlign(),this.updateMobileLine.bind(this)(e),this.updateRows(this.getSyncOption());var n=this.getErrors(e,t);this.showErrors.bind(this)(n),this._updateEntryWrapperHeightDebounced2()}},{key:"updateMobileLineLabels",value:function(e,t){var n=this._wrapper.find('.js-sc__line-label[role="free"]'),a=this._wrapper.find('.js-sc__line-label[role="required"]'),r=this._wrapper.find('.js-sc__line-label[role="spontaneous"]'),o="spontaneous-calculator__line-label--disabled",i=t.monthBudget<=0?"addClass":"removeClass",s=t.totalRequired<=0?"addClass":"removeClass",l=t.totalSpontaneous<=0?"addClass":"removeClass";n[i](o),a[s](o),r[l](o)}},{key:"update",value:function(){var e=this.state,t=(this._prevState,this._calculated,this.calculate(this._prevState,e));this._calculated=t,this._prevState=e;var n=this.getErrors(e,t);this.showErrors.bind(this)(n),this._wrapper.find(".js-sc__day-budget").text((0,s.formatNumber)(t.dayBudget)),this._wrapper.find(".js-sc__required-day").text((0,s.formatNumber)(t.dayRequired)),this._wrapper.find(".js-sc__spontaneous-day").text((0,s.formatNumber)(t.daySpontaneous)),this._wrapper.find(".js-sc__needed-income").text((0,s.formatNumber)(t.totalOutlay)),this._wrapper.find(".js-sc__month-budget").text((0,s.formatNumber)(t.monthBudget>0?t.monthBudget:0)),this._wrapper.find(".js-sc__required-month").text((0,s.formatNumber)(t.totalRequired)),this._wrapper.find(".js-sc__spontaneous-month").text((0,s.formatNumber)(t.totalSpontaneous)),this.updateMobileLine.bind(this)(e),this.updateMobileLineLabels.bind(this)(e,t),this.updateRublesPosition(),this.updateLine(e,t)}},{key:"animateThing",value:function(e,t){var n=this,a=e.find(".js-sc__thing-img"),r=this._wrapper[0].getBoundingClientRect(),o=a[0].getBoundingClientRect(),i=t.title[0].getBoundingClientRect();return new Promise(function(e,t){var s=a.clone().addClass("spontaneous-calculator-thing__img--clone");s.css({top:o.top-r.top+"px",left:o.left-r.left+"px"}),n._wrapper.append(s),$({scale:1,top:o.top-r.top,left:o.left-r.left}).animate({scale:.6,top:i.top-r.top-o.height/2+"px",left:i.left+i.width/2-r.left-o.width/2+"px"},{queue:!1,duration:300,step:function(e,t){var n="scale("+this.scale+") translateZ(0px)";s.css({"-webkit-transform":n,"-moz-transform":n,"-ms-transform":n,"-o-transform":n,transform:n,top:this.top+"px",left:this.left+"px"})},complete:function(){s.addClass("spontaneous-calculator-thing__img--animated"),setTimeout(function(){s.remove(),e()},100)}})})}},{key:"loadImage",value:function(e){return new Promise(function(t,n){e.onload=t,e.onerror=n})}},{key:"startAnimateSpending",value:function(e){var t=this,n=this._wrapper.find(".js-sc__spending"),a=n.find("img").toArray();Promise.all([].concat(a.map(function(e){return t.loadImage(e)}),new Promise(function(e){setTimeout(e,500)}))).then(function(){n.addClass("ready"),setTimeout(function(){n.addClass("animated")},2e3)})}},{key:"getRowsData",value:function(e){return this._wrapper.find(".js-sc__"+e+"-row").toArray().map(function(t){var n=$(t).find(".js-sc__"+e+"-title"),a=$(t).find(".js-sc__"+e+"-amount");return{title:{value:n[0].value,placeholder:n[0].placeholder,focused:n[0].activeElement},amount:{value:a[0].value,placeholder:a[0].dataset.placeholder,focused:n[0].activeElement},disabled:n.attr("disabled")&&a.attr("disabled"),filled:a[0].value&&a[0].value.replace(/\s/g,"")>0}})}},{key:"setRowsData",value:function(e,t){this._wrapper.find(".js-sc__"+e+"-row").toArray().some(function(n,a){if(a>t.length-1)return!0;var r=$(n).find(".js-sc__"+e+"-title");r[0].value=t[a].title.value?t[a].title.value:"",r[0].placeholder=t[a].title.placeholder?t[a].title.placeholder:"",r[0].disabled=t[a].disabled;var o=$(n).find(".js-sc__"+e+"-amount");o[0].value=t[a].amount.value?t[a].amount.value:"",o[0].placeholder=t[a].amount.placeholder?t[a].amount.placeholder:"",o[0].disabled=t[a].disabled,o.attr("data-placeholder",t[a].amount.placeholder?t[a].amount.placeholder:""),$(n)[t[a].filled?"addClass":"removeClass"]("spontaneous-calculator__row--filled")})}},{key:"initHandlers",value:function(){var e=this;this._wrapper.on("keyup keydown change",".js-sc__income-amount,\n       .js-sc__outlay-amount,\n       .js-sc__spontaneous-amount",function(t,n){if(9!=t.keyCode){e.updateRows(e.getSyncOption(),n),e.update.bind(e)(),(0,s.formatNumberInput)(t),e.updateRublePosition(t.target);var a=$(t.target).parents(".js-sc__row");t.target.value.replace(/\s/g,"")>0?a.addClass("spontaneous-calculator__row--filled"):a.removeClass("spontaneous-calculator__row--filled")}}),this._wrapper.on("keyup keydown change",".js-sc__income-title,\n       .js-sc__outlay-title,\n       .js-sc__spontaneous-title\n       ",function(t,n){var a=$(t.target),r=a.val().match(/\d+/g);if(e.updateRows(e.getSyncOption(),n),!(null==r||a.val().length>1)){var o=a.parents(".js-sc__row"),i=o.find(".js-sc__income-amount, .js-sc__outlay-amount, .js-sc__spontaneous-amount");i.val()||(i.val(r[0]),i.change()),i.focus(),a.val(a.val().replace(/\d+/gi,"")),a.change()}}),this._wrapper.on("click",".js-sc__input-wrapper",function(e){"INPUT"!=$(e.target)[0].tagName&&$(e.target).find("input").focus()}),this._wrapper.on("focus",".js-sc__income-title,\n       .js-sc__outlay-title,\n       .js-sc__spontaneous-title",function(e){e.target.placeholder=""}),this._wrapper.on("blur",".js-sc__income-title,\n       .js-sc__outlay-title,\n       .js-sc__spontaneous-title",function(e){var t=e.target;t.placeholder=t.dataset.placeholder}),this._wrapper.on("focus",".js-sc__income-amount, .js-sc__outlay-amount, .js-sc__spontaneous-amount",function(e){e.target.disabled||e.target.parentNode.classList.add("focused")}),this._wrapper.on("blur",".js-sc__income-amount, .js-sc__outlay-amount, .js-sc__spontaneous-amount",function(e){e.target.parentNode.classList.remove("focused")}),this._wrapper.on("focus",".js-sc__income-amount, .js-sc__outlay-amount, .js-sc__spontaneous-amount",function(t){var n=t.target;n.placeholder="",e.updateRublePosition(n)}),this._wrapper.on("blur",".js-sc__income-amount, .js-sc__outlay-amount, .js-sc__spontaneous-amount",function(e){var t=e.target;t.placeholder=t.dataset.placeholder,0==Number(t.value)&&(t.value="",$(t).change())}),this._wrapper.on("click",".js-sc__remove",function(t){var n=$(t.target).parents(".js-sc__row"),a=n.find(".js-sc__spontaneous-title"),r=n.find(".js-sc__spontaneous-amount");a.removeAttr("disabled"),a.val(""),e.updateInputOverflow(a),a.change(),r.removeAttr("disabled"),r.val(""),r.trigger("change",[{removeAllowed:!0}])}),this._wrapper.on("click",".js-sc__thing-text, .js-sc__thing-img",function(t){var n=$(t.target).hasClass("js-sc__thing")?$(t.target):$(t.target).parents(".js-sc__thing"),a=n.attr("data-title"),r=n.attr("data-price"),o=e._wrapper.find(".js-sc__spontaneous-row").toArray(),i={title:null,amount:null},s=-1,l=e.getRowsData("spontaneous"),c=(0,f.default)(l.slice(0));c.forEach(function(e,t){if(!(e.title.value!=a||s>-1))return s=c.length-t-1,i={title:$(o[s+1]).find(".js-sc__spontaneous-title"),amount:$(o[s+1]).find(".js-sc__spontaneous-amount")},!0}),i.title||o.some(function(e,t){var n=$(e).find(".js-sc__spontaneous-title"),a=$(e).find(".js-sc__spontaneous-amount");if(!n.val()&&!a.val())return i={title:n,amount:a},!0}),e.animateThing(n,i).then(function(){if(s>-1){l.splice(s+1,0,{title:{value:a},amount:{value:r}});var t=$(o[s+1]).find(".js-sc__spontaneous-title");e.setRowsData("spontaneous",l),$(o[s+1]).find("input").attr("disabled","disabled").change(),e.updateInputOverflow(t)}else i.title.val(a),e.updateInputOverflow(i.title),i.title.change(),i.title.attr("disabled","disabled"),i.amount.val(r),i.amount.change(),i.amount.attr("disabled","disabled")})}),$(window).on("resize",function(){e.handleResize.bind(e)()})}},{key:"createInput",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return $('<input\n       type="text"\n       class="spontaneous-calculator__input '+n+'"\n       value="'+e+'"\n       placeholder="'+t+'"\n       data-placeholder="'+t+'"\n       />')}},{key:"createRow",value:function(e){var t=e.title,n=e.titlePlaceholder,a=e.amount,r=e.amountPlaceholder,o=e.prefix,i=$('<div class="spontaneous-calculator__row js-sc__row js-sc__'+o+'-row"></div>'),l=$('<div class="spontaneous-calculator__input-wrapper spontaneous-calculator__input-wrapper--'+o+' spontaneous-calculator__row--title\n      js-sc__input-wrapper">\n      </div>'),c=this.createInput(t,n,"js-sc__"+o+"-title");l.append(c);var u=this.createInput((0,s.formatNumber)(a),(0,s.formatNumber)(r),"js-sc__"+o+"-amount"),d=$('<div class="spontaneous-calculator__row--amount">\n      </div>'),f=$('<div class="spontaneous-calculator__amount-helper">\n        <div class="spontaneous-calculator__amount-copy js-sc__amount-helper">\n          '+((0,s.formatNumber)(a)||(0,s.formatNumber)(r))+'\n        </div>\n        <div class="spontaneous-calculator__amount-ruble js-sc__amount-ruble">\n          '+p+"\n        </div>\n      </div>");if(d.append(u,f),"spontaneous"==o){var h=$('<button class="spontaneous-calculator__remove js-sc__remove"></button>');i.append(l,d,h)}else i.append(l,d);return i}},{key:"createRows",value:function(e,t,n){for(var a=[],r=0;r<e;r++){var o=r in t?t[r]:{title:"",titlePlaceholder:"",amount:"",amountPlaceholder:""},i=this.createRow(Object.assign({},o,{prefix:n}));a.push(i)}return a}},{key:"createOpenBracket",value:function(){return $('<div class="spontaneous-calculator__bracket spontaneous-calculator__bracket--open">\n        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="100%" viewBox="0 0 16 126" version="1.1" preserveAspectRatio="none">\n          <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n            <path d="M15.7 125C7.6 125 1 97.2 1 63 1 28.8 7.6 1 15.7 1" stroke="#0000FF" stroke-width="0.5"/>\n          </g>\n        </svg>\n      </div>')}},{key:"createCloseBracket",value:function(){return $('<div class="spontaneous-calculator__bracket spontaneous-calculator__bracket--close">\n        <svg xmlns="http://www.w3.org/2000/svg" width="15" height="100%" viewBox="0 0 15 126" version="1.1" preserveAspectRatio="none">\n          <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n            <path d="M14.7 125C6.6 125 0 97.2 0 63 0 28.8 6.6 1 14.7 1" stroke="#0000FF" stroke-width="0.5" transform="translate(7.335000, 63.000000) scale(-1, 1) translate(-7.335000, -63.000000) "/>\n          </g>\n        </svg>\n      </div>')}},{key:"createEntry",value:function(e,t,n,a){var r=$('<div class="spontaneous-calculator__entry-wrapper js-sc__entry-wrapper"></div>'),o=$('<div class="spontaneous-calculator__entry js-sc__entry"></div>'),i=this.createRows(e,t,"income"),s=this.createRows(e,n,"outlay"),l=this.createRows(e,a,"spontaneous"),c=$('<h5 class="spontaneous-calculator__entry-heading spontaneous-calculator__capital-title">Сколько вы зарабатываете</h5>'),u=$('<div class="spontaneous-calculator__needed-bubble js-sc__needed-bubble">\n        С вашими тратами нужно<br/> зарабатывать не меньше\n        <div class="spontaneous-calculator__needed-bubble--amount">\n          <span class="js-sc__needed-income"></span> '+p+"\n        </div>\n      </div>"),d=$('<div class="spontaneous-calculator__block spontaneous-calculator__block--income">\n      </div>'),f=$('<div class="spontaneous-calculator__inputs spontaneous-calculator__inputs--income js-sc__income-inputs">\n      </div>');c.append(u),f.append(c);var h=$('<div class="spontaneous-calculator__inputs spontaneous-calculator__inputs--outlay js-sc__outlay-inputs">\n        <h5 class="spontaneous-calculator__entry-heading spontaneous-calculator__capital-title">\n          Обязательные траты\n        </h5>\n      </div>'),v=$('<div class="spontaneous-calculator__block spontaneous-calculator__block--outlay">\n      </div>'),m=$('<div class="spontaneous-calculator__inputs spontaneous-calculator__inputs--spontaneous js-sc__spontaneous-inputs" id="spontaneous">\n        <h5 class="spontaneous-calculator__entry-heading spontaneous-calculator__capital-title">\n          Спонтанные траты\n        </h5>\n      </div>'),_=$('<div class="spontaneous-calculator__block spontaneous-calculator__block--spontaneous js-sc__spontaneous-block">\n      </div>');f.append(i),h.append(s),m.append(l),d.append(this.createOpenBracket(),this.createCloseBracket(),f),v.append(this.createOpenBracket(),h),_.append(this.createCloseBracket(),m);var g=$('<div class="spontaneous-calculator__block spontaneous-calculator__minus"></div>'),b=$('<div class="spontaneous-calculator__block spontaneous-calculator__equal js-sc__entry-equal"></div>'),y=$('<div class="spontaneous-calculator__block spontaneous-calculator__helper"></div>');$('<div class="spontaneous-calculator__block spontaneous-calculator__difference">\n        <div class="spontaneous-calculator__difference--inner">\n          <div class="spontaneous-calculator__big-number js-sc__month-budget-label">\n            <span class="js-sc__month-budget"></span> '+p+' в месяц\n          </div>\n          <div class="spontaneous-calculator__text spontaneous-calculator__text--error js-sc__error" data-error="minus-budget">\n            У вас отрицательный бюджет\n          </div>\n        </div>\n      </div>');return o.append(d,y,g,v,_,b),r.append(o),r}},{key:"createLine",value:function(){return $('<section class="spontaneous-calculator__desktop spontaneous-calculator__line js-sc__line">\n        <div class="spontaneous-calculator__line-sector spontaneous-calculator__line--free js-sc__line--free">\n          <div class="spontaneous-calculator__line-fill"></div>\n          <div class="spontaneous-calculator__line-label">\n          </div>\n        </div>\n        <div class="spontaneous-calculator__line-sector spontaneous-calculator__line--required js-sc__line--required">\n          <div class="spontaneous-calculator__line-fill"></div>\n          <div class="spontaneous-calculator__line-label">\n            <h5 class="spontaneous-calculator__micro-title">Обязательные траты</h5>\n            <div class="spontaneous-calculator__amount">\n              <span class="js-sc__required-day"></span> '+p+' в день\n            </div>\n          </div>\n        </div>\n        <div class="spontaneous-calculator__line-sector spontaneous-calculator__line--spontaneous js-sc__line--spontaneous">\n          <div class="spontaneous-calculator__line-fill"></div>\n          <div class="spontaneous-calculator__line-label">\n            <h5 class="spontaneous-calculator__micro-title">Спонтанные траты</h5>\n            <div class="spontaneous-calculator__amount">\n              <span class="js-sc__spontaneous-day"></span> '+p+" в день\n            </div>\n          </div>\n        </div>\n      </section>")}},{key:"createSpendingThing",value:function(e,t){return $('<div\n        class="spontaneous-calculator-thing'+(t?" spontaneous-calculator-thing--big":"")+' js-sc__thing"\n        data-id="'+e.id+'"\n        data-title="'+e.title.replace(/<br\/>/g,"")+'"\n        data-price="'+e.price+'">\n        <div\n          class="spontaneous-calculator-thing__text js-sc__thing-text">\n          <a\n            class="spontaneous-calculator-thing__title">\n            '+e.title+'\n          </a>\n          <p class="spontaneous-calculator-thing__price">\n            '+(0,s.formatNumber)(e.price)+" "+p+'\n          </p>\n        </div>\n        <a class="spontaneous-calculator-thing__img" data-id="'+e.id+'">\n          <img\n            src="'+TJ.build+"img/"+e.id+'.png"\n            srcset="'+TJ.build+"img/"+e.id+'@2x.png 2x"\n            class="js-sc__thing-img"\n            />\n        </a>\n      </div>')}},{key:"createSpending",value:function(e){var t=this,n=$('<div class="scrollyeah spontaneous-calculator__desktop spontaneous-calculator-spending js-sc__spending"></div>'),a=$('<div class="spontaneous-calculator-spending__inner js-sc__spending-inner"></div>');return a.append(e.map(function(e){return t.createSpendingThing(e)})),n.append(a),n.scrollyeah({shadows:!1,triggerScrollyeah:!0}),n}},{key:"createMobileSpending",value:function(e){var t=this,n=$('<div\n      class="spontaneous-calculator__mobile spontaneous-calculator-spending__mobile-wrapper\n      js-sc__spending">\n      </div>'),a=$('<div\n      class="scrollyeah spontaneous-calculator-spending--mobile"></div>'),r=$('<div class="spontaneous-calculator-spending__inner js-sc__spending-inner">\n      </div>'),o=$('<div class="spontaneous-calculator-spending__smalls"></div>'),i=$('<div class="spontaneous-calculator-spending__bigs"></div>');o.append(e.filter(function(e){return!e.isBig}).map(function(e){return t.createSpendingThing(e)})),i.append(e.filter(function(e){return e.isBig}).map(function(e){return t.createSpendingThing(e,!0)})),r.append(i,o),a.append(r),a.scrollyeah({shadows:!1});var s=$('<div\n        class="spontaneous-inputs-container js-sc__spontaneous-inputs-mobile"></div>');return n.append(a,s),n}},{key:"createMobileLine",value:function(){var e=$('<section class="fixedsticky spontaneous-calculator__mobile spontaneous-calculator__line-wrapper js-sc__mobile-line">\n        <h3 class="spontaneous-calculator__mobile spontaneous-calculator__heading spontaneous-calculator__line-heading">\n          Бюджет на месяц\n        </h3>\n        <div class="spontaneous-calculator__line-labels">\n          <div class="spontaneous-calculator__line-label js-sc__line-label" role="free">\n            <h5 class="spontaneous-calculator__micro-title spontaneous-calculator__line-text">свобод. деньги</h5>\n            <div class="spontaneous-calculator__amount">\n              <span class="js-sc__month-budget"></span> '+p+'\n            </div>\n          </div>\n          <div class="spontaneous-calculator__line-label js-sc__line-label" role="required">\n            <h5 class="spontaneous-calculator__micro-title spontaneous-calculator__line-text">обязат. траты</h5>\n            <div class="spontaneous-calculator__amount">\n              <span class="js-sc__required-month"></span> '+p+'\n            </div>\n          </div>\n          <div class="spontaneous-calculator__line-label js-sc__line-label" role="spontaneous">\n            <h5 class="spontaneous-calculator__micro-title spontaneous-calculator__line-text">спонтанные траты</h5>\n            <div class="spontaneous-calculator__amount">\n              <span class="js-sc__spontaneous-month"></span> '+p+'\n            </div>\n            </div>\n        </div>\n        <div class="spontaneous-calculator__line">\n          <div class="spontaneous-calculator__line-sector spontaneous-calculator__line--free js-sc__line--free">\n            <div class="spontaneous-calculator__line-fill"></div>\n          </div>\n          <div class="spontaneous-calculator__line-sector spontaneous-calculator__line--required js-sc__line--required">\n            <div class="spontaneous-calculator__line-fill"></div>\n          </div>\n          <div class="spontaneous-calculator__line-sector spontaneous-calculator__line--spontaneous js-sc__line--spontaneous">\n            <div class="spontaneous-calculator__line-fill"></div>\n          </div>\n        </div>\n      </section>');return FixedSticky.tests.sticky=!1,e.fixedsticky(),e}},{key:"render",value:function(e,t,n,a){var r=this.createEntry,o=this._minRowsCount,i=(this._maxCasesCount,this.createSpending.bind(this)(a)),s=this.createMobileSpending.bind(this)(a),l=$('<h3 class="spontaneous-calculator__heading spontaneous-calculator__desktop">\n        Бюджет на месяц\n      </h3>'),c=$('<h3\n        class="spontaneous-calculator__heading spontaneous-calculator__heading--day-budget js-sc__free-money-heading">\n        Свободные деньги\n      </h3>'),u=$('<div class="spontaneous-calculator__equal spontaneous-calculator__day-budget--equal"></div>'),d=$('<div class="spontaneous-calculator__day-budget js-sc__day-budget-amount">\n        <span class="js-sc__day-budget"></span> '+p+" в день\n      </div>"),f=$('<p class="spontaneous-calculator__day-budget-notice js-sc__needed-income-mobile">\n        С вашими тратами нужно зарабатывать не меньше\n        <span class="spontaneous-calculator__day-budget-amount">\n          <span class="js-sc__needed-income"></span> '+p+"\n        </span>\n      </p>"),h=$('<div class="spontaneous-calculator__day-budget-wrapper"></div>');h.append(u,d,f);var v=r.bind(this)(o,e,t,n),m=$('<div class="spontaneous-calculator__playzone js-sc__playzone"></div>');m.append(c,h,this.createLine()),this._wrapper.append(i,s,l,v,m,this.createMobileLine())}},{key:"totalIncome",get:function(){var e=0;return this._wrapper.find(".js-sc__income-amount").each(function(t,n){var a=parseFloat(n.value.split(/\s/).join(""));e+=a||0}),e}},{key:"totalRequired",get:function(){var e=0;return this._wrapper.find(".js-sc__outlay-amount").each(function(t,n){var a=parseFloat(n.value.split(/\s/).join(""));e+=a||0}),e}},{key:"totalSpontaneous",get:function(){var e=0;return this._wrapper.find(".js-sc__spontaneous-amount").each(function(t,n){var a=parseFloat(n.value.split(/\s/).join(""));e+=a||0}),e}},{key:"state",get:function(){return{totalIncome:this.totalIncome,totalRequired:this.totalRequired,totalSpontaneous:this.totalSpontaneous}}},{key:"errors",get:function(){return this.getErrors(this.state,this._calculated)}}]),e}();t.default=h},function(e,t,n){"use strict";function a(e){return 96<=e&&e<=105}function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return""==e||isNaN(e)?e:(e=parseFloat(e).toFixed(t),-0==e?0:e<0?"-"+r(-e):e<1e4?e:e.toString().replace(/(\d)(?=(\d{3})+(\D|$))/g,"$1 "))}function o(e){var t=e.target,n=t.value;if(""!=n){var o=t.selectionStart;if("keydown"==e.type&&!String.fromCharCode(e.keyCode).match(/\d/)&&-1==s.indexOf(e.keyCode)&&!a(e.keyCode))return void e.preventDefault();var l=r((0,i.clearNumber)(n.split(/\s/).join("")));if(l!=n){var c=n.slice(0,o);if(l){var u=l.slice(0,o),d=c.match(/\s/)?c.match(/\s/).length:0,f=u.match(/\s/)?u.match(/\s/).length:0,p=f-d;t.value=l,t.selectionEnd=o+p}}}}Object.defineProperty(t,"__esModule",{value:!0}),t.formatNumber=r,t.formatNumberInput=o;var i=n(0),s=[8,16,17,18,37,38,39,40,91,93]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){for(var t=1;t<e.length;t++)if(null===e[t]||e[t]!==e[t-1])return!1;return!0}},function(e,t,n){"use strict";function a(e,t){var n;return function(){var a=this,r=arguments,o=function(){n=null,e.apply(a,r)};clearTimeout(n),n=setTimeout(o,t)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a},function(e,t,n){"use strict";function a(e){var t=null,n=null,a=e.length;for(t=0,n=a-1;t<n;t+=1,n-=1){var r=e[t];e[t]=e[n],e[n]=r}return e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.incomeDefaults=[{titlePlaceholder:"Зарплата",amountPlaceholder:0},{titlePlaceholder:"Фриланс",amountPlaceholder:0},{titlePlaceholder:"От родителей",amountPlaceholder:0}],t.outlayDefaults=[{titlePlaceholder:"Квартира",amountPlaceholder:0},{titlePlaceholder:"Связь",amountPlaceholder:0},{titlePlaceholder:"В заначку",amountPlaceholder:0}],t.spontaneousDefaults=[]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.spending=[{title:"Найк-флайнит-<br/>макс",price:9e3,id:"nike",isBig:!0},{title:"Поло <br/>в «Лакосте»",price:6e3,id:"lacoste"},{title:"Конструктор «Лего <br/>Майнкрафт»",price:7e3,id:"lego-maincraft",isBig:!0},{title:"Пицца <br/>в «Папа-<br/>джонсе»",price:1200,id:"pizza"},{title:"Часы «Джи-шок»",price:1e4,id:"g-shock",isBig:!0},{title:"Фраппучино <br/>в «Старбаксе»",price:350,id:"starbucks"},{title:"Ужин на двоих <br/>в «Деликатессен»",price:2500,id:"delicatess",isBig:!0},{title:"Пара футболок <br/>в «Эйч-энд-эме»",price:1500,id:"hm"},{title:"Папайя в «Азбуке <br/>вкуса»",price:1150,id:"azbuka",isBig:!0},{title:"Билет <br/>на «Сапсан»",price:3e3,id:"sapsan"},{title:"Семейный ужин <br/>в «Чайхоне №1»",price:4e3,id:"chaihona",isBig:!0},{title:"Штраф за участие <br/>в митинге",price:15e3,id:"meeting"},{title:"КНОППАРП <br/>в Икее",price:7990,id:"sofa",isBig:!0},{title:"Штраф <br/>за неправильную <br/>парковку",price:5e3,id:"parking-penalty"},{title:"Стрижка и укладка <br/>в «Птичке»",price:2600,id:"haircut",isBig:!0},{title:"Бурно затусить <br/>в «16 тонн»",price:4e3,id:"16tonn"},{title:"Бургер <br/>«Шейк-шаке»",price:500,id:"burger"},{title:"Айфон 7",price:6e4,id:"iphone",isBig:!0},{title:"Презервативы <br/>«Дюрекс»",price:1e3,id:"durex"},{title:"Наушники <br/>«Эйрподс»",price:15e3,id:"airpods",isBig:!0},{title:"Квест «МСК <br/>2048»",price:2900,id:"quest"},{title:"Серьги с цирконом",price:28e3,id:"earrings",isBig:!0},{title:"Книги <br/>в «Фаланстере»",price:1500,id:"books"},{title:"12-дюймовый <br/>золотой Макбук",price:12e4,id:"macbook",isBig:!0},{title:"Стекло <br/>для Айфона 7",price:2e4,id:"iphone-glass"},{title:"Кофе и десерт <br/>в «Кофемании»",price:1100,id:"coffeemania",isBig:!0},{title:"Поставить <br/>пломбу на зуб",price:8e3,id:"tooth"},{title:"Самсунг-гэлакси-<br/>А7",price:3e4,id:"samsung",isBig:!0},{title:"Концерт <br/>«Депеш-мод»",price:8e3,id:"depeche-mode"},{title:"Пообедать <br/>в «Торро-гриль»",price:1200,id:"torro-grill",isBig:!0},{title:"Прокатиться <br/>на «Убер-блэке»",price:1500,id:"uber-black"},{title:"Поездка <br/>в Таиланд",price:15e4,id:"thai",isBig:!0}]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){if($(".quiz").length){var e={submit:"Узнать ответ",next:"Следующий вопрос",finish:"Показать результаты",share:"Поделиться результатом"};!function(t){t.fn.quizify=function(){return this.each(function(){var n=t(this);n.cards=n.find(".js-quizcard"),n.total=n.cards.length,n.activeCard=t(n.cards[0]),n.multiple="true"==n.activeCard.data("multiple"),n.question=0,n.correct=0,!!n.data("meter")&&(n.meter=!0,n.score=0),n.activeCard.show(),n.multiple&&n.insertActionButton("submit"),n.loadNextQuestion=function(){n.question++;var e=t(n.cards[n.question]);n.activeCard.html(e.html()),n.multiple="true"==e.attr("data-multiple"),n.multiple?(n.activeCard.attr("data-multiple","true"),n.insertActionButton("submit")):n.activeCard.removeAttr("data-multiple");var a=n.activeCard.find("img")[0];if(a){var r=a.getBoundingClientRect().top;r<0&&window.scrollBy({left:0,top:r-10,behavior:"smooth"})}},n.checkAnswer=function(){var e=n.activeCard.find("li"),a=e.filter(".checked");if(a.length){if(e.filter(":not(.checked)").addClass("unchecked"),a.addClass("tested"),e.filter(".correct").addClass("tested"),n.multiple){var r=!0;a.each(function(e){if(!t(this).hasClass("correct"))return r=!1,!1}),r&&n.correct++}else a.first().hasClass("correct")&&n.correct++;var o=n.question<n.total-1?"next":"finish";n.insertActionButton(o)}},n.insertActionButton=function(t){n.activeCard.find(".js-quizcard-button-box").remove(),n.activeCard.find(".js-quizcard-body").append('<div class="quiz__card-submit-area js-quizcard-button-box"><button class="quiz__card-submit-button js-quizcard-button" data-action="'+t+'">'+e[t]+"</button></div>")},n.showResults=function(){var a=n.closest(".article-body"),r=void 0,o=n.meter?n.score:n.correct;if(t(".js-quizresult").each(function(){if(o<this.dataset.min)return!1;r=t(this)}),!n.meter){var i=t(".js-quizresult-title",r),s=o+(n.meter?"":" / "+n.total);i.before('<div class="quiz__result-count">'+s+"</div>")}var l=n[0].dataset.id,c="http://journal.tinkoff.ru/share/"+l+"/"+o+"/",u=n[0].dataset.title,d=a.next(".js-article-footer").find(".sharer");t(".js-share-button",d).each(function(){t(this).attr("data-url",c),"twt"==t(this).data("share")&&t(this).attr("data-text",u)}),d.before('<p class="article-footer__sharer-title">'+e.share+"</p>").removeClass("hidden"),n.activeCard.hide(),n.addClass("quiz--finished"),r.show();var f=r.find("img")[0];f&&window.scrollBy({left:0,top:f.getBoundingClientRect().top-10,behavior:"smooth"}),t(".subscribe",a).length&&t(".subscribe",a).show()},n.on("click","li",function(e){e.preventDefault();var a=t(this);if(!a.hasClass("unchecked"))if(n.meter){var r=parseInt(a.data("score"));n.score+=r,a.addClass("checked"),n.question<n.total-1?n.loadNextQuestion():n.showResults()}else n.multiple?a.toggleClass("checked"):(n.activeCard.find("li.checked").removeClass("checked"),a.addClass("checked"),n.checkAnswer())}),n.on("click",".js-quizcard-button",function(e){switch(e.preventDefault(),this.dataset.action){case"next":n.loadNextQuestion();break;case"finish":n.showResults();break;default:n.checkAnswer()}})})}}(jQuery),$(".quiz").quizify()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(0);t.default=function(){var e=Array.from(document.querySelectorAll("[data-youtube-nav]"));if(!e.length)return!1;(0,a.loadYoutubeAPI)(),window.onYouTubePlayerAPIReady=function(){e.forEach(function(e){e.classList.add("loaded");var t=e.dataset.youtubeNav,n=document.getElementById(t);if(n){var a=function(){r.forEach(function(e){var t=e.dataset.time.split(":")[0],n=e.dataset.time.split(":")[1],a=60*parseInt(t)+parseInt(n);e.dataset.timeSeconds=a,e.addEventListener("click",function(t){t.preventDefault();var n=t.target==e?e:t.target.parentNode;i.seekTo(parseInt(n.dataset.timeSeconds),!0)}),e.addEventListener("mouseover",function(t){var n=t.target==e?e:t.target.parentNode;o.querySelector(".js-youtube-pseudobar-timing").innerText=n.dataset.time,o.querySelector(".js-youtube-pseudobar-done").style.width=n.dataset.timeSeconds/i.getDuration()*100+"%",o.classList.add("visible")}),e.addEventListener("mouseleave",function(e){o.classList.remove("visible")})})},r=Array.from(e.querySelectorAll("a"));if(!r.length)return!1;var o=document.createElement("div");o.className="youtube-pseudobar",o.innerHTML='\n\t\t\t\t\t<div class="youtube-pseudobar__progress">\n\t\t\t\t\t\t<div class="youtube-pseudobar__progress-done js-youtube-pseudobar-done">\n\t\t\t\t\t\t\t<div class="youtube-pseudobar__progress-timing js-youtube-pseudobar-timing">10:34</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t',n.parentNode.insertBefore(o,n.nextSibling),o.style.marginTop=-1*o.offsetHeight+"px";var i=new YT.Player(t,{events:{onReady:a}})}})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(0);t.default=function(){function e(e){var n=document.createElement("iframe"),a="https://www.youtube.com/embed/"+e.dataset.embed+"?rel=0&showinfo=0&autohide=1&modestbranding=1&enablejsapi=1";e.dataset.nocontrols&&(a+="&controls=0"),e.dataset.noloop&&(a+="&loop=0"),n.id="screencast_"+e.dataset.embed,n.setAttribute("allowfullscreen",""),n.setAttribute("src",a),e.appendChild(n);new YT.Player(n.id,{events:{onReady:function(t){window.players[e.dataset.embed]=t.target,t.target.playVideo()},onStateChange:function(n){n.data==YT.PlayerState.PLAYING?(t(n.target.getVideoData().video_id),e.classList.remove("loading"),e.classList.add("loaded"),e.classList.remove("paused"),e.classList.add("playing")):n.data==YT.PlayerState.PAUSED?(e.classList.remove("playing"),e.classList.add("paused")):n.data==YT.PlayerState.ENDED&&e.classList.remove("playing")}}})}function t(e){for(var t in window.players)window.players.hasOwnProperty(t)&&t!=e&&window.players[t].pauseVideo()}var n=Array.from(document.querySelectorAll(".screencast-frame"));if(!n.length)return!1;(0,a.loadYoutubeAPI)(),window.players={},window.onYouTubePlayerAPIReady=function(){n.forEach(function(t){t.addEventListener("click",function(n){if(t.classList.contains("loading"))return!1;t.classList.contains("loaded")?window.players[t.dataset.embed].playVideo():(t.classList.add("loading"),e(t))})})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){$(".yoke-handle").each(function(e,t){t.setAttribute("tabindex","-1")}),$(".yoke-handle").click(function(e){e.preventDefault();var t=$(this),n=t.parent().find("input"),a=parseInt(n.attr("min"))||0,r=parseInt(n.attr("max")),o=parseInt(n.val())||0,i=t.data("sign");if("plus"==i){if(o++,r&&o>r)return!1}else if("minus"==i&&--o<a)return!1;n.val(o)})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(49),r=function(e){return e&&e.__esModule?e:{default:e}}(a);t.default=function(){if(document.querySelector(".js-calc")){var e=[{selector:'.js-calc-field[data-field="price"]',default:0},{selector:'.js-calc-field[data-field="multiplier"]',default:1},{selector:'.js-calc-field[data-field="months"]',default:1}];window.costsCalculators=[],Array.from(document.querySelectorAll(".article-body")).forEach(function(t){var n=Array.from(t.querySelectorAll(".js-calc"));n.length&&costsCalculators.push(new r.default({groupsNodes:n,calculationFields:e,article:t}))})}}},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e){var t=e.previousSibling;return"H2"!=t.tagName&&"H3"!=t.tagName&&(t=r(t)),t}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=function(){function e(t){a(this,e);var n=t.groupsNodes,o=t.calculationFields,i=t.article,s=[];n.forEach(function(e){var t={node:e,total:0,title:r(e).innerHTML};s.push(t)}),this.groups=s,this.calculationFields=o,this.$_article=$(i),this.total=0,this.saveFieldsDefaultValues(),i.querySelector(".calc-chart")&&(this.chart=i.querySelector(".calc-chart"),this.hasChart=!0,this.initChart()),this.initHandlers()}return o(e,[{key:"calculate",value:function(){var e=0,t=this.calculationFields;this.groups.forEach(function(n){var a=0,r=Array.from(n.node.querySelectorAll(".js-calc-item.checked"));if(!r.length)return void(n.total=0);r.forEach(function(r){var o=1;t.forEach(function(e){var t=e.default,n=r.querySelector(e.selector);n&&(t=parseFloat(n.value)),o*=t}),a+=o,e+=o,n.total=a,r.querySelector(".js-calc-item-subtotal b").textContent=o.format()})}),this.total=e,this.hasChart&&this.redrawChart()}},{key:"updateCounters",value:function(){var e=this.total;this.groups.forEach(function(t){t.node.querySelector(".js-calc-subtotal b").textContent=t.total.format(),t.node.querySelector(".js-calc-total b").textContent=e.format();var n=t.node.querySelector(".js-calc-footer").classList;t.total>0?n.add("visible"):n.remove("visible")})}},{key:"saveFieldsDefaultValues",value:function(){this.$_article.find(".js-calc-field").each(function(e,t){t.dataset.default=t.value})}},{key:"initHandlers",value:function(){var e=this;if(this.$_article.on("click",".js-calc-item",function(e){var t=$(e.target);if(!t.is(".js-calc-item-toggle")&&!t.is("label")){var n=$(e.currentTarget);n.hasClass("checked")||(n.find(".js-calc-item-toggle").trigger("click"),t.is('input[type="number"]')&&t.focus())}}),this.$_article.on("change",".js-calc-item-toggle",function(t){t.preventDefault(),$(t.target).closest(".js-calc-item").toggleClass("checked",t.target.checked).toggleClass("unchecked",!t.target.checked),"radio"==t.target.type&&$('.js-calc-item-toggle[name="'+t.target.name+'"]:not(:checked)').closest(".js-calc-item").removeClass("checked").addClass("unchecked"),e.calculate(),e.updateCounters()}),this.$_article.on("click",".js-calc-item-toggle",function(e){if("radio"==e.target.type){var t=$(e.target);t.closest(".js-calc-item").hasClass("checked")&&(e.target.checked=!1,t.trigger("change"))}}),Array.from(this.$_article[0].querySelectorAll(".js-calc-item[data-combo-master]")).forEach(function(t){var n=t.id;$(t).on("change",".js-calc-item-toggle",function(t){var a=$(t.target),r=a.closest(".js-calc").find('.js-calc-item[data-combo="'+n+'"]'),o=r.find(".js-calc-field"),i=r.find(".js-calc-item-price, .js-calc-item-yoke"),s=r.find(".js-calc-item-toggle"),l=r.find(".js-calc-item-subtotal"),c=r.find(".js-calc-item-hint");t.target.checked?(r.removeClass("unchecked").addClass("checked"),c.show(),s.prop("checked",!0),i.hide(),l.hide(),o.each(function(e,t){t.value=0})):(r.removeClass("checked").addClass("unchecked"),c.hide(),s.prop("checked",!1),i.show(),o.each(function(e,t){t.value=t.dataset.default})),e.calculate(),e.updateCounters()})}),this.$_article.on("keyup",".js-calc-field",function(t){e.calculate(),e.updateCounters()}),this.$_article.on("click",".yoke-handle",function(t){e.calculate(),e.updateCounters()}),this.hasChart){var t=this;window.addEventListener("resize",function(){t.setChartLayout()},!1)}}},{key:"initChart",value:function(){var e=this,t=this.groups.length,n=Math.round(100/t*1e3)/1e3;this.groups.forEach(function(t,a){var r=document.createElement("div");r.className="calc-chart__group js-calc-chart-group",r.style.width=n+"%",r.style.left=n*a+"%";var o='\n\t\t\t\t<span class="calc-chart__group-title">'+t.title+'</span>\n\t\t\t\t<span class="calc-chart__group-total js-calc-chart-value"><span>0</span> <span class="ruble">Р</span></span>\n\t\t\t\t<div class="calc-chart__group-bar js-calc-chart-bar"></div>\n\t\t\t';r.innerHTML=o,e.chart.appendChild(r),e.setChartLayout()})}},{key:"redrawChart",value:function(){var e=[],t=0;if(this.groups.forEach(function(t){e.push(t.total)}),(t=Math.max.apply(Math,e))>0){var n=Array.from(this.chart.querySelectorAll(".js-calc-chart-group"));e.forEach(function(e,a){var r=Math.round(e/t*100*1e3)/1e3;n[a].dataset.percentage=r,n[a].querySelector(".js-calc-chart-value span").innerHTML=e.format(),window.innerWidth>=900?n[a].style.height=r+"%":n[a].querySelector(".js-calc-chart-bar").style.width=r+"%"}),this.chart.classList.add("visible")}else this.chart.classList.remove("visible")}},{key:"setChartLayout",value:function(){var e=Array.from(this.chart.querySelectorAll(".js-calc-chart-group"));window.innerWidth<900?(this.chart.classList.add("calc-chart--mobile"),e.forEach(function(e){var t=e.querySelector(".js-calc-chart-bar");t.style.width=e.dataset.percentage+"%",t.style.height=""})):(this.chart.classList.remove("calc-chart--mobile"),e.forEach(function(e){e.style.height=e.dataset.percentage+"%",e.querySelector(".js-calc-chart-bar").style.width=""}))}}]),e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){$(function(){function e(){if(null==a){for(var e=getComputedStyle(n,""),t="",o=0;o<e.length;o++)0!=e[o].indexOf("overflow")&&0!=e[o].indexOf("padding")&&0!=e[o].indexOf("border")&&0!=e[o].indexOf("outline")&&0!=e[o].indexOf("box-shadow")&&0!=e[o].indexOf("background")||(t+=e[o]+": "+e.getPropertyValue(e[o])+"; ");a=document.createElement("div"),a.style.cssText=t+" box-sizing: border-box; width: 210px;",n.insertBefore(a,n.firstChild);for(var i=n.childNodes.length,o=1;o<i;o++)a.appendChild(n.childNodes[1]);n.style.height=a.getBoundingClientRect().height+"px",n.style.padding="0",n.style.border="0"}var s=n.parentNode.querySelector(".js-stop-counter").getBoundingClientRect().top,l=n.getBoundingClientRect(),c=Math.round(l.top+a.getBoundingClientRect().height-s-93);l.top-r<=0?l.top-r<=c?(a.className="stop",a.style.top=-c+"px"):(a.className="sticky",a.style.top=r+"px"):(a.className="",a.style.top=""),window.addEventListener("resize",function(){n.children[0].style.width=getComputedStyle(n,"").width},!1)}var t={$labels:$("[data-role=label]"),$fixCounter:!1,$lastLabel:!1,prevTop:0,currTop:0,docHalfHeight:0,currLabel:-1,fixCounterOffset:0,containerOffset:0,finished:!1,reload:function(e){void 0!=window.innerHeight?this.docHalfHeight=window.innerHeight/2:this.docHalfHeight=$(window).height()/2,this.fixCounterOffset={top:"50vh"},this.$fixCounter.css({left:this.fixCounterOffset.left}),this.containerOffset=$(e).offset()},init:function(e){$(window).width()<992||this.$labels.length<1||(this.prevTop=$(window).scrollTop(),this.currTop=this.prevTop,$(".baby-counter").length>0?this.$fixCounter=$('<div class="fix-counter fix-1"><div class="counter-total-block">Всего за первого ребёнка:<div class="counter-total">0</div></div></div>').appendTo(e):this.$fixCounter=$('<div class="fix-counter"><div class="counter-total-block">Всего:<div class="counter-total">0</div></div></div>').appendTo(e),this.reload(e),this.$labels.each(function(e){var n=$(this);n.data("num",e),n.data("sum")?(n.css({position:"relative"}),void 0==n.data("desc")&&n.data("desc",""),$(".euro-counter").length>0?n.data("label",$('<div class="label-counter" data-num="'+e+'">+'+n.data("sum")+' € <p class="lebel-desc">'+n.data("desc")+"</p></div>").appendTo(n)):n.data("label",$('<div class="label-counter" data-num="'+e+'">+'+n.data("sum")+' <span class="ruble">Р</span><p class="lebel-desc">'+n.data("desc")+"</p></div>").appendTo(n))):n.data("label",$()),n.data("finish")&&(t.$lastLabel=n)}),$(window).resize(function(){t.reload(e)}),this.$fixCounter.hide(),$(window).scroll(function(){var n=0,a=!1;t.prevTop=t.currTop,t.currTop=$(window).scrollTop(),t.$labels.each(function(r){var o=$(this),i=o.offset();if(t.currTop>t.prevTop)t.currTop>=o.offset().top-t.docHalfHeight-90&&t.currTop<+(o.offset().top-t.docHalfHeight)?$(".counter-total-block").addClass("shadow"):t.currTop>=o.offset().top-t.docHalfHeight+0&&t.currTop<=o.offset().top-t.docHalfHeight+90&&$(".counter-total-block").removeClass("shadow"),t.currTop>=i.top-t.docHalfHeight&&(o.data("label").is(":visible")&&o.data("label").addClass("showlabel"),a=o),n++;else if(t.currTop<t.prevTop){var s=$('p[data-role="label"]',e).first().offset().top;t.currTop<s-t.currTop&&t.$fixCounter.fadeOut(),t.currTop>=o.offset().top-t.docHalfHeight-100&&t.currTop<o.offset().top-t.docHalfHeight-50?$(".counter-total-block").removeClass("shadow"):t.currTop>=o.offset().top-t.docHalfHeight-50&&t.currTop<=o.offset().top-t.docHalfHeight+100&&$(".counter-total-block").addClass("shadow"),t.currTop<=i.top-t.docHalfHeight&&(o.data("label").is(":hidden")&&o.data("label").removeClass("showlabel"),n||r>0&&(a=t.$labels.eq(r-1)),n++)}}),n&&a&&($(".euro-counter").length>0?t.$fixCounter.find(".counter-total").html(a.data("total")+" €"):t.$fixCounter.find(".counter-total").html(a.data("total")+' <span class="ruble">Р</span>'),t.$fixCounter.is(":visible")||t.$fixCounter.fadeIn(),a.data("finish"),t.$fixCounter.css({}),t.currLabel!=a.data("num")&&(t.$fixCounter.removeClass("light"),setTimeout(function(){t.$fixCounter.addClass("light")},1),t.currLabel=a.data("num")))}))}};$(".article__wrapper").has('[data-role="label"]').each(function(e,n){t.init(n)});var n=document.querySelector(".fix-counter"),a=null,r=t.docHalfHeight-20;n&&(window.addEventListener("scroll",e,!1),document.body.addEventListener("scroll",e,!1))})}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(52),o=a(r),i=n(53),s=a(i),l=n(54),c=a(l);t.default=function(){(0,o.default)(),(0,s.default)(),(0,c.default)()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){function e(e,t,n){for(var a=0,r=1;r<n.length;r++)a+=e[n[r]]=+e[n[r]];return e.total=a,e}if("undefined"==typeof d3)return!1;if(!document.querySelector("#child_chart"))return!1;var t=d3.select("#child_chart"),n={top:20,right:20,bottom:30,left:40},a=+t.attr("width")-n.left-n.right,r=+t.attr("height")-n.top-n.bottom,o=t.append("g").attr("transform","translate("+n.left+", "+n.top+")"),i=d3.scaleBand().rangeRound([0,a]).padding(.1).align(.1),s=d3.scaleLinear().rangeRound([r,0]),l=d3.scaleOrdinal().range(["#e58d70","#bddd6f","#b5b6b2","#89b8dc","#faec6d","#e8d5ec","#98d6d0"]),c=d3.stack();d3.csv("/wp-content/uploads/child_costs.csv",e,function(e,t){i.domain(t.map(function(e){return e.State})),s.domain([0,d3.max(t,function(e){return e.total})]).nice(),l.domain(t.columns.slice(1)),o.selectAll(".serie").data(c.keys(t.columns.slice(1))(t)).enter().append("g").attr("class","serie").attr("fill",function(e){return l(e.key)}).selectAll("rect").data(function(e){return e}).enter().append("rect").attr("x",function(e){return i(e.data.State)}).attr("y",function(e){return s(e[1])}).attr("height",function(e){return s(e[0])-s(e[1])}).attr("width",i.bandwidth()),o.append("g").attr("class","axis axis--x").attr("transform","translate(0,"+r+")").call(d3.axisBottom(i)).append("text").attr("x",890).attr("y",s(s.ticks(10).pop())).attr("dy","0.350em").attr("text-anchor","start").attr("fill","#000").text("мес."),o.append("g").attr("class","axis axis--y").call(d3.axisLeft(s).ticks(10,"r")).append("text").attr("x",2).attr("y",s(s.ticks(10).pop())).attr("dy","0.35em").attr("text-anchor","start").attr("fill","#000").text("тыс. руб.");var n=o.selectAll(".legend").data(t.columns.slice(1).reverse()).enter().append("g").attr("class","legend").attr("transform",function(e,t){return"translate(0,"+20*t+")"}).style("font","10px sans-serif");n.append("rect").attr("x",a-18).attr("width",18).attr("height",18).attr("fill",l),n.append("text").attr("x",a-24).attr("y",9).attr("dy",".35em").attr("text-anchor","end").text(function(e){return e})})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){function e(e){var t=e.getBoundingClientRect(),n=t.top+2*t.height,a=n-screen.height;a>0&&window.scroll({left:0,top:window.scrollY+a+10,behavior:"smooth"})}var t=Array.from(document.querySelectorAll(".digest-question"));if(!t.length)return!1;var n=t.length;Array.from(document.querySelectorAll(".digest__question a")).forEach(function(e){e.setAttribute("target","_blank")}),window.currentCardIndex=0,n>1&&(""==location.hash?window.currentCardIndex=n-1:window.currentCardIndex=parseInt(location.hash.substr(1))-n),t.forEach(function(t){var n=t.parentNode,a=n.querySelector(".digest-answer"),o=a.querySelector(".sharer"),i=Array.from(t.querySelectorAll(".js-digest-answer"));i.forEach(function(t){t.addEventListener("click",function(a){a.preventDefault();var s=!!t.dataset.correct;n.classList.add("completed"),screen.width<=580&&e(n.querySelector(".digest-answer")),i.forEach(function(e){e.classList.add("disabled"),e.dataset.correct&&s&&e.classList.add("correct-v1"),e.dataset.correct||s||e.classList.add("incorrect-v1")}),o&&(0,r.default)(o)})})}),window.addEventListener("scroll",function(e){for(var n=window.currentCardIndex,a=0;a<t.length;a++){var r=t[a].getBoundingClientRect().top;if(r>0&&r<=20){n=a;break}}n!=window.currentCardIndex&&(window.currentCardIndex=n,history.replaceState(null,null,"#"+t[n].id))})};var a=n(2),r=function(e){return e&&e.__esModule?e:{default:e}}(a)},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var a=n(3),r=n(0);t.default=function(){var t=Array.from(document.querySelectorAll(".js-help-card"));if(!t.length)return null;var n={URL_ROOT:e.URL_ROOT,container:document.querySelector("#articles"),cards:[],topics:{},scrollTop:(0,r.getDocumentScrollTop)(),isScrolling:!1,currentTopicName:e.request.topicName,currentCardIndex:e.request.cardIndex,get currentCard(){var t=this.cards[this.currentCardIndex];return t.title=e.CARDS_DATA[t.id],t},getTopic:function(e){return this.topics[e]||null},get currentTopic(){var e=this.getTopic(this.currentTopicName);return e||(e=this.getTopic(this.defaultTopic)),e},get url(){return""+location.origin+this.URL_ROOT+this.currentTopicName+"/"+this.currentCard.name+"/"},updatePageState:function(){(0,r.replaceHistoryState)(this.url,this.currentCard.title)}};Array.from(document.querySelectorAll(".js-help-topic")).forEach(function(e,t){var a=e.dataset.topic;0===t&&(n.defaultTopic=a),n.topics[a]={node:e,name:a,index:parseInt(e.dataset.index),setActive:function(){n.currentTopic.node.classList.remove("active"),n.currentTopicName=this.name,this.node.classList.add("active")},get heading(){return document.querySelector("#"+this.name)}}}),n.scrollToTopic=function(e){var t=e.index>n.currentTopic.index?"down":"up",a=e.heading;window.removeEventListener("scroll",n.scrollHandler),n.isScrolling=!0,document.body.classList.add("scrolling"),window.scrollBy({left:0,top:"down"===t?300:-300,behavior:"smooth"}),e.setActive(),n.currentCardIndex=e.firstCardIndex,n.updatePageState(),setTimeout(function(){window.scrollTo(0,a.offsetTop);var e=a.getBoundingClientRect().top;e>0&&window.scrollBy(0,e+("up"===t?10:-20)),document.body.classList.remove("scrolling"),window.scrollBy({left:0,top:"down"===t?15:-15,behavior:"smooth"}),setTimeout(function(){n.isScrolling=!1,window.addEventListener("scroll",n.scrollHandler,{passive:!0})},500)},500)},t.forEach(function(e){var t={node:e,id:parseInt(e.dataset.id),uid:e.dataset.uid,name:e.dataset.name,viewed:!1,setViewed:function(){this.viewed||((0,a.incviews)(this.uid),this.viewed=!0)},get topic(){return n.getTopic(this.node.dataset.topic)},get offset(){var e=this.offsetCompensation||0;return this.node.getBoundingClientRect().top-e-15}};n.cards.push(t)}),n.scrollToCard=function(e){window.scrollTo(0,e.offset+this.scrollTop)};for(var o in n.topics)!function(e){var t=n.topics[e],a=getComputedStyle(t.heading),r=parseInt(t.heading.nextElementSibling.dataset.index);t.firstCardIndex=r,n.cards[r].offsetCompensation=t.heading.offsetHeight,parseFloat(a.marginTop),parseFloat(a.marginBottom),t.node.addEventListener("click",function(){if(t.name===n.currentTopicName||n.isScrolling)return!1;n.scrollToTopic(t)})}(o);return window.addEventListener("load",function(){0===n.currentCardIndex&&(n.currentCardIndex=n.currentTopic.firstCardIndex);var e=n.currentCard;n.scrollToCard(e),e.topic.setActive(),e.setViewed(),n.container.classList.remove("loading")}),n.scrollHandler=function(){var e=!1,t=(0,r.getDocumentScrollTop)(),a=t>n.scrollTop?"down":"up";if(n.scrollTop=t,"down"===a&&n.cards[n.currentCardIndex+1].offset<=50?(e=!0,n.currentCardIndex++):"up"===a&&n.currentCard.offset>50&&(e=!0,n.currentCardIndex>0&&n.currentCardIndex--),!e)return!1;var o=n.currentCard;o.setViewed(),o.topic.index!==n.currentTopic.index&&o.topic.setActive(),n.updatePageState()},window.addEventListener("scroll",n.scrollHandler,{passive:!0}),n.burger=document.querySelector("#burger"),n.navigator=document.querySelector("#navigator"),n.overlay=document.querySelector("#overlay"),n.burger.addEventListener("click",function(e){n.toggleNavigator(n.burger.classList.contains("menu-on")?"off":"on")}),n.overlay.addEventListener("click",function(e){n.toggleNavigator("off")}),n.toggleNavigator=function(e){n.burger.classList.toggle("menu-on"),"on"===e?(n.navigator.classList.add("visible"),n.navigator.classList.remove("slide-right"),n.overlay.classList.add("visible")):(n.navigator.classList.remove("visible"),n.navigator.classList.add("slide-right"),n.overlay.classList.remove("visible"))},n}}).call(t,n(1))},function(e,t,n){"use strict";function a(e){i.load(e)}function r(){i.container.getBoundingClientRect().top<600&&(i.pixel("rgid",i.ID),window.removeEventListener("scroll",r))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e=e||document,i.init({scope:e})};var o="https://relap.io/api/v2/",i={INIT_QUERY_SELECTOR:".js-relap-recommendations",OUTPUT_QUERY_SELECTOR:".js-relap-recommendations-content",EXCLUDE:window.RELAP_EXCLUDE||[],LIMIT:10,ID:null,SOURCE:location.pathname,dataSourceRatio:.333,data:{},init:function(e){var t=e.scope;if(this.container=t.querySelector(this.INIT_QUERY_SELECTOR),!this.container)return null;this.output=this.container.querySelector(this.OUTPUT_QUERY_SELECTOR),this.dataSource=Math.random()<=this.dataSourceRatio?"recco":"relap",window.loadRecommendationsData=a;var n="https://journal.tinkoff.ru"+location.pathname,r=document.createElement("script");"relap"===this.dataSource?r.src=o+"similar_pages_jsonp.js?url="+n+"&callback=loadRecommendationsData&limit="+this.LIMIT:r.src="https://recco.datamind.ru/api/v1/pages.js?callback=loadRecommendationsData&limit="+this.LIMIT,document.head.appendChild(r)},load:function(e){var t=this;if(!e||!e.recs||!e.recs.length)return null;this.ID=e.rec_group_id,this.pixel("event","hit"),window.addEventListener("scroll",r);var n=[];e.recs.forEach(function(e){var a=e.url.split("https://journal.tinkoff.ru/")[1];n.push(a),t.data["/"+a+"/"]=e.rec_id}),$.get(TJ.api+"recommendations/",{u:n.join(),ex:this.EXCLUDE,s:this.SOURCE,ds:this.dataSource},function(e){t.render(e)})},render:function(e){var t=this;if(!e.length)return null;var n=e.join("");this.container.innerHTML=this.container.innerHTML+n,this.container.classList.add("visible"),Array.from(this.container.querySelectorAll('.js-footer-recommendation[data-source="relap"]')).forEach(function(e){e.href+="?utm_source=recommendations&utm_campaign="+("relap"==t.dataSource?"relap":"recco_v0");var n=t.data[e.dataset.url];n&&(e.dataset.relap=!0,e.addEventListener("click",function(a){a.preventDefault(),t.pixel("rid",n),location.assign(e.href)}))})},pixel:function(e,t){if("relap"===this.dataSource){var n=new Image;return n.src=o+"pixel.gif?"+e+"="+t,n}return null}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){function e(){for(var e=c.scrollTop(),n=0,i=0;i<o.length;i++){var s=o[i].offsetTop;s>0&&s<=e+l&&(n=i),0==i&&s>e&&(n=-1)}n!=d&&(d=n,r(n),t(n),a(n))}function t(e){$(".js-collection-nav-item.current").removeClass("current"),e>-1&&$('.js-collection-nav-item[data-scroll-nav="'+e+'"]').each(function(){$(this).addClass("current")}),n(e)}function n(e){if(-1==e)return void $(".js-collection-nav-indicator").each(function(){$(this).removeClass("visible")});var t=u.width(),n=$(".scrollyeah__shaft");if(!(n.length<2)){var a=t-n[1].scrollWidth;$(h).each(function(){var r=$(this).find(".js-collection-nav-item.current"),o=$(this).find(".js-collection-nav-indicator"),i=r.outerWidth(),s=parseInt(r.position().left),l=t>530?0:10-s;o.attr("data-scroll",e).addClass("visible").width(i).css("left",s+"px"),$(this).hasClass("scrollyeah_shadow")&&(s>t-i&&-s>a?l=10-s:-s<a-120&&(l=a),n.css("left",l))})}}function a(e){if(!(e<0)){var t=o[e];t&&(t.classList.contains("viewed")||TJ.user||($.get(TJ.api+"stats/"+t.dataset.uid+"/incviews/"),t.classList.add("viewed")))}}function r(e){if(e>-1){var t=titles[e],n=p+"#"+slugs[e];history.replaceState({title:t,url:n},t,n),document.title=t}else history.replaceState({title:f,url:p},f,p),document.title=f}var o=document.querySelectorAll(".collection-item");if(!o.length)return!1;if(location.hash){var i=parseInt(location.hash.substring(1));if(!isNaN(i)){var s=document.querySelector('.collection-item[data-id="'+i+'"]');s&&(location.hash=s.id)}}var l=300,c=$(window),u=$("body"),d=-1,f=document.title,p=location.origin+location.pathname+location.search,h=document.querySelectorAll(".collection-navbar"),v=document.querySelectorAll(".js-collection-nav-item");$.scrollIt&&$.scrollIt({upKey:null,downKey:null,easing:"linear",scrollTime:600,activeClass:"is-active"}),$(v).on("click",function(e){e.preventDefault(),$(this).hasClass("current")}),window.addEventListener("scroll",e),c.on("resize",function(e){n(d)})}},function(e,t,n){"use strict";function a(e){if(0===e.total)return null;var t=Array.from(e.node.querySelectorAll(".js-poll-button-bar")),n=Array.from(e.node.querySelectorAll(".js-poll-button-result"));e.results.forEach(function(a,r){var o=a/e.total*100;t[r].style.maxWidth=o+"%",n[r].innerText=Math.round(o)+"%",0===o?n[r].style.display="none":n[r].style.left=o+"%"}),e.node.classList.add("voted")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e=e||document;var t=Array.from(e.querySelectorAll(".article-poll"));if(!t.length)return null;t.forEach(function(e){var t={node:e,buttons:Array.from(e.querySelectorAll(".js-poll-button")),uid:e.dataset.uid,results:[],selected:null,setResults:function(){a(this)},get total(){var e=0;return this.results.forEach(function(t){e+=t}),e}};t.voted=-1!==document.cookie.indexOf("poll:"+t.uid+"=1"),$.get(TJ.api+"poll/?id="+t.uid,function(e){e.length?t.results=e.map(function(e){return parseInt(e)}):t.buttons.forEach(function(){t.results.push(0)}),t.voted?t.setResults():t.buttons.forEach(function(e,n){e.addEventListener("click",function(a){e.classList.add("selected"),t.selected=n,t.results[n]++,t.voted=!0,t.setResults(),$.post(TJ.api+"poll/",{id:t.uid,key:n},function(){document.cookie="poll:"+t.uid+"=1;path=/;expires=Thu, 25 Jan 2018 23:59:59 GMT;"})})}),TJ.user&&console.info(t.uid+": "+t.total+" total",t.results)})})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){function e(e,t){var n=0,a=Array.from(e.querySelectorAll(".js-faq-poll-button-title"));t||(t=[],a.forEach(function(e){t.push(0)})),t.forEach(function(e){n+=parseInt(e)}),n>0&&(t.forEach(function(e,t){var r=Math.round(parseInt(e)/n*100);a[t].dataset.value=r}),e.classList.add("finished"),TJ.user&&console.log(e.dataset.guid+" TOTAL VOTES: "+n,t))}var t=Array.from(document.querySelectorAll(".faq-poll"));t.length&&t.forEach(function(t){var n=Array.from(t.querySelectorAll(".js-faq-poll-button"));if(n.length){var a=t.dataset.guid,r="poll_"+a,o=localStorage[r],i=t.querySelector(".js-faq-poll-answer");n.forEach(function(s,l){s.addEventListener("click",function(c){if(s.classList.add("clicked"),i.innerHTML=s.nextSibling.innerHTML,!o){if(t.classList.contains("finished")||s.classList.contains("selected"))return!1;s.classList.add("selected"),$.get(TJ.api+"/polls/"+a,function(o){o||(o=[],n.forEach(function(e){o.push(0)})),o[l]++,e(t,o),$.post(TJ.api+"/polls/update",{id:a,key:l,count:n.length}),localStorage[r]=l})}})}),o&&$.get(TJ.api+"/polls/"+a,function(a){e(t,a),n[o].classList.add("selected"),t.classList.add("visible")}),t.classList.add("visible")}})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(0);t.default=function(){function e(){var e=(0,a.getDocumentScrollTop)(),t=e>r?"DOWN":"UP";r=e,tocs.forEach(function(e){if("DOWN"==t?"top"==e.position&&r+n>=e.breakpoint.top?(e.position="fixed",e.isActive=!0,e.el.classList.add("table-of-contents--fixed")):"bottom"!=e.position&&r+n+e.height>=e.breakpoint.bottom&&(e.position="bottom",e.isActive=!1,e.el.classList.remove("table-of-contents--fixed"),e.el.classList.add("table-of-contents--bottom"),e.setActiveItem(e.links.length-1)):"fixed"==e.position&&r+n<=e.breakpoint.top?(e.position="top",e.isActive=!1,e.el.classList.remove("table-of-contents--fixed"),e.deactivateAllItems()):"bottom"==e.position&&r+n+e.height<=e.breakpoint.bottom&&(e.position="fixed",e.isActive=!0,e.el.classList.remove("table-of-contents--bottom"),e.el.classList.add("table-of-contents--fixed")),e.isActive)for(var a=0;a<e.sections.length;a++){var o=e.sections[a].offset;if("DOWN"==t){if(r>=o-30&&r<=o+30){e.setActiveItem(a);break}}else if("UP"==t&&r<=o-30){if(0==a){e.deactivateAllItems();break}if(r<=o-300){e.setActiveItem(a-1);break}}}})}if(screen.width<=1156)return!1;var t=Array.from(document.querySelectorAll(".table-of-contents"));if(!t.length)return!1;var n=30;window.tocs=[];var r=(0,a.getDocumentScrollTop)();window.addEventListener("scroll",e),window.addEventListener("load",function(a){var r=document.body.getBoundingClientRect();t.forEach(function(t){var a=t.parentNode,o=a.getBoundingClientRect(),i={el:t,height:t.offsetHeight,wrapper:a,container:a.parentNode,breakpoint:{top:o.top-r.top+10,bottom:Math.round(o.top-r.top+o.height)-10},links:Array.from(t.querySelectorAll(".js-toc-link")),sections:[],position:"top",isActive:!1,setActiveItem:function(e){e=parseInt(e),this.deactivateAllItems(),this.links[e].parentNode.classList.add("active")},deactivateAllItems:function(){var e=this.el.querySelector(".js-toc-item.active");e&&e.classList.remove("active")}};i.links.forEach(function(t){var a=i.container.querySelector("#"+t.dataset.id);if(a){var o=Math.round(a.getBoundingClientRect().top-r.top)-n;i.sections.push({node:a,offset:o}),t.addEventListener("click",function(n){n.preventDefault(),window.removeEventListener("scroll",e),setTimeout(function(){window.addEventListener("scroll",e),window.scrollBy(0,-1)},500),i.setActiveItem(t.dataset.index),window.scroll({left:0,top:o,behavior:"smooth"})})}}),window.tocs.push(i),i.el.classList.add("visible")})})}}]);